!function(){var e=!1;function t(e){try{return(e||"").toString().toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim()}catch(e){return""}}function r(e){try{for(var t=e,r=0;r<6&&t;r++){var a=t.querySelector&&t.querySelector(".search-cms-wrapper-2, .search-cms-wrapper");if(a)return a;t=t.parentElement}var n=document.querySelector(".search-cms-wrapper-2, .search-cms-wrapper");if(n)return n}catch(e){}return null}function a(e){try{var a=(e.getAttribute("data-input")||"").toString().match(/^search-(.+)$/);if(!a)return;var n=a[1],c=r(e)||document,s=t(e.value||""),o=Array.prototype.slice.call(c.querySelectorAll('[data-search="cms-item-'+n+'"], [data-search="cms_item_'+n+'"], .search-cms-item-2, .search-cms-item')),l=Array.prototype.slice.call(c.querySelectorAll('[data-text="search-'+n+'"], [data-text="search_'+n+'"], [data-text*="search"]'));if(console.log("[CMS-SEARCH] handle input",{key:n,term:s,items:o.length,nodesForKey:l.length}),""===s){for(var i=0;i<o.length;i++)o[i].style.display="none";var d=c.querySelector('[data-div="noResult-'+n+'"]');if(d&&(d.style.display="none"),"true"===(e.getAttribute("data-url")||"").toString().toLowerCase())try{var u=new URL(window.location.href);u.searchParams.delete("search-"+n),window.history.pushState({},"",u)}catch(e){}try{var h=c.querySelector('.search-cms-wrapper-2, .search-cms-wrapper, [role="list"]');h&&(h.style.display="none");var y=c.querySelector('[role="list"], .search-cms-list, .w-dyn-items');y&&(y.style.display="none")}catch(e){}return}var p=new WeakSet,m=0;if(l.length){for(var v=0;v<l.length;v++){var f=l[v],g=f.closest('[data-search^="cms-item-"], [data-search^="cms_item_"]');if(g){p.add(g);var S=t(f.textContent||"");S||(S=t(g.textContent||""));var w=-1!==S.indexOf(s);if(g.style.display=w?"":"none",w){try{"none"===getComputedStyle(g).display&&(g.style.display="block")}catch(e){}m++}}}for(var C=0;C<o.length;C++){var A=o[C];p.has(A)||(A.style.display="none")}}else for(var q=0;q<o.length;q++){var b=o[q],L=-1!==t(b.textContent||"").indexOf(s);if(b.style.display=L?"":"none",L){try{"none"===getComputedStyle(b).display&&(b.style.display="block")}catch(e){}m++}}for(var R=o.length,x=0,E=0;E<o.length;E++)"none"===getComputedStyle(o[E]).display&&x++;var k=c.querySelector('[data-div="noResult-'+n+'"], [data-div="noResult_'+n+'"]');k&&(k.style.display=R>0&&x===R?"":"none");try{var _=c.querySelector('.search-cms-wrapper-2, .search-cms-wrapper, [role="list"]');_&&(_.style.display=m>0&&s?"block":"none");var M=c.querySelector('[role="list"], .search-cms-list, .w-dyn-items');M&&(M.style.display=m>0&&s?"block":"none")}catch(e){}if("true"===(e.getAttribute("data-url")||"").toString().toLowerCase())try{var H=new URL(window.location.href);H.searchParams.set("search-"+n,e.value),window.history.pushState({},"",H)}catch(e){}}catch(e){}}function n(){try{if(e)return;e=!0,console.log("[CMS-SEARCH] init binding events"),document.addEventListener("input",function(e){var t=e.target;try{if(!t||!t.matches||!t.matches('[data-input^="search-"]'))return}catch(e){return}console.log("[CMS-SEARCH] input event fired"),a(t)},!0),document.addEventListener("keyup",function(e){var t=e.target;try{if(!t||!t.matches||!t.matches('[data-input^="search-"]'))return}catch(e){return}console.log("[CMS-SEARCH] keyup event fired"),a(t)},!0),document.addEventListener("focusin",function(e){var a=e.target;try{if(!a||!a.matches||!a.matches('[data-input^="search-"]'))return}catch(e){return}var n=(a.getAttribute("data-input")||"").toString().match(/^search-(.+)$/);if(n){var c=n[1],s=r(a)||document,o=s.querySelectorAll('[data-search="cms-item-'+c+'"], [data-search="cms_item_'+c+'"]'),l=t(a.value||"");if(l){for(var i=0;i<o.length;i++){var d=o[i],u=-1!==t(d.textContent||"").indexOf(l);d.style.display=u?"":"none"}var h=s.querySelector('.search-cms-wrapper-2, .search-cms-wrapper, [role="list"]');h&&(h.style.display="block")}}},!0),document.addEventListener("focusout",function(e){var t=e.target;try{if(!t||!t.matches||!t.matches('[data-input^="search-"]'))return}catch(e){return}var a=(t.getAttribute("data-input")||"").toString().match(/^search-(.+)$/);if(a){a[1];var n=(r(t)||document).querySelector('.search-cms-wrapper-2, .search-cms-wrapper, [role="list"]');n&&(n.style.display="none")}},!0);for(var n=document.querySelectorAll('[data-input^="search-"]'),c=0;c<n.length;c++){var s=n[c],o=(s.getAttribute("data-input")||"").match(/^search-(.+)$/);if(o){var l=o[1],i=(r(s)||document).querySelector('[data-div="noResult-'+l+'"], [data-div="noResult_'+l+'"]');i&&(i.style.display="none");try{if("true"===(s.getAttribute("data-url")||"").toString().toLowerCase()){var d=new URLSearchParams(window.location.search).get("search-"+l);d&&(s.value=d,a(s))}}catch(e){}try{a(s)}catch(e){}}}}catch(e){}}window.CmsSearch={init:n,handleInput:a,normalizeText:t},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();