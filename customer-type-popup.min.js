!function(){function e(e){try{return(e||"").toString().toLowerCase().replace(/\s+/g," ").trim()}catch(e){return""}}function t(){return"private"===y()}function r(){return"business"===y()}function a(){try{const e=["#gewerbe",'[data-customer-type="gewerbe"]','[data-customer-segment="gewerbe"]','[data-list="gewerbe"]',".collection-list-gewerbe"],r=e=>e.flatMap(e=>Array.from(document.querySelectorAll(e))),a=(e,t)=>e.forEach(e=>{e&&e.style&&(e.style.display=t?"none":"")}),c=r(["#privat",'[data-customer-type="privat"]','[data-customer-segment="privat"]','[data-list="privat"]',".collection-list-privat"]),n=r(e);a(c,!t()),a(n,t())}catch(e){}}function c(){try{const e=document.getElementById("nav-private"),r=document.getElementById("nav-business");e&&e.classList&&e.classList.toggle("stp-btn-active",t()),r&&r.classList&&r.classList.toggle("stp-btn-active",!t());const a=document.querySelector(".customer-type-switch");a&&a.classList&&(a.classList.toggle("is-private",t()),a.classList.toggle("is-business",!t()))}catch(e){}}var n=!1;function o(e){try{const a=["#privat",'[data-customer-type="privat"]','[data-customer-segment="privat"]','[data-list="privat"]',".collection-list-privat"].concat(["#gewerbe",'[data-customer-type="gewerbe"]','[data-customer-segment="gewerbe"]','[data-list="gewerbe"]',".collection-list-gewerbe"]);for(var t=e;t&&t!==document;){for(var r=0;r<a.length;r++)try{if(t.matches&&t.matches(a[r]))return t}catch(e){}t=t.parentElement}return null}catch(e){return null}}function d(){try{const c=["#privat",'[data-customer-type="privat"]','[data-customer-segment="privat"]','[data-list="privat"]',".collection-list-privat"],n=["#gewerbe",'[data-customer-type="gewerbe"]','[data-customer-segment="gewerbe"]','[data-list="gewerbe"]',".collection-list-gewerbe"],o=t()?c:n;for(var e=0;e<o.length;e++){var r=document.querySelector(o[e]);if(r)try{var a=window.getComputedStyle(r);if("none"!==a.display&&"hidden"!==a.visibility)return r}catch(e){return r}}return null}catch(e){return null}}function i(e){try{for(var t=e,r=0;r<6&&t;r++){var a=t.querySelector&&t.querySelector(".search-cms-wrapper");if(a)return a;t=t.parentElement}var c=document.querySelector(".search-cms-wrapper");if(c)return c}catch(e){}return null}function u(e){try{var t=r(),a=(e.getAttribute("data-price-resolved")||"").toLowerCase();if("brutto"===a)return!0===t;if("netto"===a)return!1===t;var c=m(e);if(c.productId||c.variantId){var n=l(c.productId,c.variantId);if(n)return e.setAttribute("data-price-resolved",n),t?"brutto"===n:"netto"===n}var o=function(e){try{var t=(e.getAttribute("data-price-type")||"").toLowerCase();if("brutto"===t)return"brutto";if("netto"===t)return"netto";var r=(e.getAttribute("data-customer-type")||"").toLowerCase();if("gewerbe"===r)return"brutto";if("privat"===r)return"netto";var a=(e.getAttribute("data-brutto")||"").toLowerCase();if("true"===a||"1"===a)return"brutto";var c=e.querySelector("a[href]"),n=(c&&c.textContent+" "+c.getAttribute("href")||e.textContent||"").toLowerCase();if(/inkl\.?\s*mwst|brutto/.test(n))return"brutto";if(/exkl\.?\s*mwst|ohne\s*mwst|netto/.test(n))return"netto";if(/-inkl-mwst/.test(n))return"brutto";if(/-exkl-mwst/.test(n))return"netto"}catch(e){}return null}(e);return o?(e.setAttribute("data-price-resolved",o),t?"brutto"===o:"netto"===o):!t}catch(e){return!0}}Object.create(null);var s=Object.create(null);function l(e,t){try{idMapsBuilt||buildReverseMaps()}catch(e){}if(t&&s[t])return s[t];if(e&&s[e])return s[e];var r=null;try{if(t&&(Object.keys(POPUP_PRODUCT_MAP_BRUTTO||{}).some(function(e){var r=POPUP_PRODUCT_MAP_BRUTTO[e];return r&&r.variantId===t})&&(r="brutto"),!r&&Object.keys(POPUP_PRODUCT_MAP_NETTO||{}).some(function(e){var r=POPUP_PRODUCT_MAP_NETTO[e];return r&&r.variantId===t})&&(r="netto")),!r&&e&&(Object.keys(POPUP_PRODUCT_MAP_BRUTTO||{}).some(function(t){var r=POPUP_PRODUCT_MAP_BRUTTO[t];return r&&r.productId===e})&&(r="brutto"),!r&&Object.keys(POPUP_PRODUCT_MAP_NETTO||{}).some(function(t){var r=POPUP_PRODUCT_MAP_NETTO[t];return r&&r.productId===e})&&(r="netto")),!r){var a=t&&idToKey.variantIdToKey[t],c=e&&idToKey.productIdToKey[e],n=a||c||null;if(n){var o=POPUP_PRODUCT_MAP_BRUTTO&&POPUP_PRODUCT_MAP_BRUTTO[n]||"object"==typeof PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO[n],d=POPUP_PRODUCT_MAP_NETTO&&POPUP_PRODUCT_MAP_NETTO[n]||"object"==typeof PRODUCT_MAP&&PRODUCT_MAP&&PRODUCT_MAP[n];!o||o.variantId!==t&&o.productId!==e?!d||d.variantId!==t&&d.productId!==e||(r="netto"):r="brutto"}}}catch(e){}return t&&r&&(s[t]=r),e&&r&&(s[e]=r),r}function m(e){try{var t=e.querySelector("[data-commerce-sku-id], [data-commerce-product-id]")||e,r=t.getAttribute("data-commerce-product-id")||"",a=t.getAttribute("data-commerce-sku-id")||"";if(!a){var c=e.querySelector("a[data-commerce-sku-id], a[data-commerce-product-id]");c&&(r=r||c.getAttribute("data-commerce-product-id")||"",a=c.getAttribute("data-commerce-sku-id")||"")}return{productId:r,variantId:a}}catch(e){return{productId:"",variantId:""}}}function f(t){try{try{localStorage&&"1"===localStorage.getItem("CMS_SEARCH_DEBUG")}catch(e){}var a=(t.getAttribute("data-input")||"").toString().match(/^search-(.+)$/);if(!a)return;var c=a[1],n=o(t)||d()||document,s=i(t)||n||document,l=e(t.value||""),m=s||document,f=Array.prototype.slice.call(m.querySelectorAll('[data-search="cms-item-'+c+'"], [data-search="cms_item_'+c+'"], .search-cms-item, .w-dyn-item')),p=Array.prototype.slice.call(m.querySelectorAll('[data-text="search-'+c+'"], [data-text="search_'+c+'"], [data-text*="search"]'));try{console.warn("[CMS-SEARCH] handle input",{type:r()?"business":"private",key:c,term:l,items:f.length,nodesForKey:p.length})}catch(e){}if(""===l){for(var y=0;y<f.length;y++)f[y].style.display="none";var v=s.querySelector('[data-div="noResult-'+c+'"]');if(v&&(v.style.display="none"),"true"===(t.getAttribute("data-url")||"").toString().toLowerCase())try{var b=new URL(window.location.href);b.searchParams.delete("search-"+c),window.history.pushState({},"",b)}catch(e){}try{var h=s.querySelector('.search-cms-wrapper, [role="list"]');h&&(h.style.display="none");var g=s.querySelector('[role="list"], .search-cms-list, .w-dyn-items');g&&(g.style.display="none")}catch(e){}return}var w=new WeakSet,I=0;if(p.length){for(var T=0;T<p.length;T++){var P=p[T],_=P.closest('[data-search^="cms-item-"], [data-search^="cms_item_"]');if(_){w.add(_);var C=e(P.textContent||"");C||(C=e(_.textContent||""));var O=-1!==C.indexOf(l)&&u(_);if(_.style.display=O?"":"none",O){try{"none"===getComputedStyle(_).display&&(_.style.display="block")}catch(e){}I++}}}for(var S=0;S<f.length;S++){var A=f[S];w.has(A)||(A.style.display="none")}}else for(var k=0;k<f.length;k++){var R=f[k],U=-1!==e(R.textContent||"").indexOf(l)&&u(R);if(R.style.display=U?"":"none",U){try{"none"===getComputedStyle(R).display&&(R.style.display="block")}catch(e){}I++}}for(var x=f.length,M=0,E=0;E<f.length;E++)"none"===getComputedStyle(f[E]).display&&M++;var D=s.querySelector('[data-div="noResult-'+c+'"], [data-div="noResult_'+c+'"]')||n.querySelector?.('[data-div="noResult-'+c+'"], [data-div="noResult_'+c+'"]');D&&(D.style.display=x>0&&M===x?"":"none");try{var q=s.classList&&s.classList.contains("search-cms-wrapper")?s:s.querySelector('.search-cms-wrapper, [role="list"]')||f[0]&&f[0].parentElement;q&&(q.style.display=I>0&&l?"block":"none");var L=s.querySelector('[role="list"], .search-cms-list, .w-dyn-items');L&&(L.style.display=I>0&&l?"block":"none")}catch(e){}if("true"===(t.getAttribute("data-url")||"").toString().toLowerCase())try{var B=new URL(window.location.href);B.searchParams.set("search-"+c,t.value),window.history.pushState({},"",B)}catch(e){}}catch(e){}}function p(e){!function(e){try{const t=Date.now()+1728e5;localStorage.setItem("solarTool_customerType",JSON.stringify({type:e,expiresAt:t}))}catch(e){}}("business"===e?"business":"private"),a(),c();try{!function(){try{for(var e=document.querySelectorAll('[data-input^="search-"]'),t=0;t<e.length;t++){var r=e[t],a=r.value||"",c=(r.getAttribute("data-input")||"").match(/^search-(.+)$/);if(c){var n=c[1],u=i(r)||o(r)||d()||document;try{for(var s=u.querySelectorAll('[data-search="cms-item-'+n+'"], [data-search="cms_item_'+n+'"]'),l=0;l<s.length;l++)s[l].removeAttribute("data-price-resolved")}catch(e){}if(""!==a)f(r);else try{for(var m=u.querySelectorAll('[data-search="cms-item-'+n+'"], [data-search="cms_item_'+n+'"]'),p=0;p<m.length;p++)m[p].style.display="none";var y=u.querySelector('[data-div="noResult-'+n+'"], [data-div="noResult_'+n+'"]');y&&(y.style.display="none");var v=u.querySelector('.search-cms-wrapper, [role="list"]');v&&(v.style.display="none")}catch(e){}}}}catch(e){}}()}catch(e){}try{window.solarGrid&&(window.solarGrid.updateCurrentTotalPrice&&window.solarGrid.updateCurrentTotalPrice(),window.solarGrid.updateOverviewTotalPrice&&window.solarGrid.updateOverviewTotalPrice(),(window.solarGrid.ensureWebflowFormsMapped||window.solarGrid.generateHiddenCartForms)?.call(window.solarGrid))}catch(e){}try{window.CartCompatibility&&"function"==typeof window.CartCompatibility.schedule&&window.CartCompatibility.schedule(150)}catch(e){}}function y(){try{const e=localStorage.getItem("solarTool_customerType");if(!e)return null;const t=JSON.parse(e);return t&&t.type?"number"==typeof t.expiresAt&&Date.now()>t.expiresAt?(localStorage.removeItem("solarTool_customerType"),null):"private"===t.type?"private":"business":null}catch(e){return null}}function v(){const e=document.getElementById("customer-type-overlay");e&&(e.style.display="none",e.setAttribute("aria-hidden","true"))}function b(){const e=document.getElementById("nav-private"),t=document.getElementById("nav-business");e&&e.addEventListener("click",function(){p("private")}),t&&t.addEventListener("click",function(){p("business")});if(document.getElementById("customer-type-overlay")){const e=y(),t=document.getElementById("stp-private"),r=document.getElementById("stp-business");t&&t.addEventListener("click",function(){p("private"),v()}),r&&r.addEventListener("click",function(){p("business"),v()}),e||function(){const e=document.getElementById("customer-type-overlay");e&&(e.style.display="flex",e.setAttribute("aria-hidden","false"))}()}a(),c();try{!function(){try{if(n)return;n=!0;try{console.warn("[CMS-SEARCH] init binding events")}catch(e){}try{localStorage&&localStorage.getItem("CMS_SEARCH_DEBUG")}catch(e){}document.addEventListener("input",function(e){var t=e.target;try{if(!t||!t.matches||!t.matches('[data-input^="search-"]'))return}catch(e){return}try{console.warn("[CMS-SEARCH] input event fired")}catch(e){}f(t)},!0),document.addEventListener("keyup",function(e){var t=e.target;try{if(!t||!t.matches||!t.matches('[data-input^="search-"]'))return}catch(e){return}try{console.warn("[CMS-SEARCH] keyup event fired")}catch(e){}f(t)},!0),document.addEventListener("focusin",function(e){var t=e.target;try{if(!t||!t.matches||!t.matches('[data-input^="search-"]'))return}catch(e){return}try{f(t)}catch(e){}},!0),document.addEventListener("focusout",function(e){var t=e.target;try{if(!t||!t.matches||!t.matches('[data-input^="search-"]'))return}catch(e){return}try{var r=(t.getAttribute("data-input")||"").toString().match(/^search-(.+)$/);if(!r)return;r[1];var a=(i(t)||o(t)||d()||document).querySelector('.search-cms-wrapper, [role="list"]');a&&(a.style.display="none")}catch(e){}},!0);for(var e=document.querySelectorAll('[data-input^="search-"]'),t=0;t<e.length;t++){var r=e[t],a=(r.getAttribute("data-input")||"").match(/^search-(.+)$/);if(a){var c=a[1],u=(o(r)||document).querySelector('[data-div="noResult-'+c+'"], [data-div="noResult_'+c+'"]');u&&(u.style.display="none");try{if("true"===(r.getAttribute("data-url")||"").toString().toLowerCase()){var s=new URLSearchParams(window.location.search).get("search-"+c);s&&(r.value=s,f(r))}}catch(e){}try{f(r)}catch(e){}}}}catch(e){}}()}catch(e){}try{CartCompatibility.init()}catch(e){}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",b):b()}(),function(){var e=null,t=!1,r={productIdToKey:{},variantIdToKey:{}},a=!1,c=!1,n=0,o=2e3,d=0;function i(){try{const e=localStorage.getItem("solarTool_customerType");if(!e)return null;const t=JSON.parse(e);return t&&t.type?"number"==typeof t.expiresAt&&Date.now()>t.expiresAt?(localStorage.removeItem("solarTool_customerType"),null):"private"===t.type?"private":"business":null}catch(e){return null}}function u(){return"business"===i()}const s={Solarmodul:{productId:"68c7ec7571df9723b8ef5050",variantId:"68c7ec7e71df9723b8ef53cd"},UlicaSolarBlackJadeFlow:{productId:"68c7ef7fbeeaadb13262a062",variantId:"68c7ef7ff397fcf9d6d7571e"},SolarmodulPalette:{productId:"68c7ec7471df9723b8ef5008",variantId:"68c7ec7c71df9723b8ef5160"},UlicaSolarBlackJadeFlowPalette:{productId:"68c7ec7471df9723b8ef5006",variantId:"68c7ec7d71df9723b8ef5187"},Quetschkabelschuhe:{productId:"68c7ec7471df9723b8ef502d",variantId:"68c7ec7c71df9723b8ef514b"},Solarkabel:{productId:"68c7ec7471df9723b8ef5031",variantId:"68c7ec7d71df9723b8ef5205"},Erdungsband:{productId:"68c7ec7471df9723b8ef5033",variantId:"68c7ec7c71df9723b8ef5159"},Endkappen:{productId:"68c7ec7471df9723b8ef5041",variantId:"68c7ec7e71df9723b8ef533e"},Mittelklemmen:{productId:"68c7ec7471df9723b8ef5043",variantId:"68c7ec7e71df9723b8ef53e0"},Dachhaken:{productId:"68c7ec7471df9723b8ef5045",variantId:"68c7ec7f71df9723b8ef54f9"},Schiene_360_cm:{productId:"68c7ec7471df9723b8ef5047",variantId:"68c7ec7e71df9723b8ef53d6"},Schienenverbinder:{productId:"68c7ec7471df9723b8ef5049",variantId:"68c7ec7e71df9723b8ef533b"},Schiene_240_cm:{productId:"68c7ec7471df9723b8ef504b",variantId:"68c7ec7e71df9723b8ef5387"},MC4_Stecker:{productId:"68c7ec7671df9723b8ef506e",variantId:"68c7ec7d71df9723b8ef5230"},Tellerkopfschraube:{productId:"68c7ec7671df9723b8ef5072",variantId:"68c7ec7f71df9723b8ef544a"},Schrauben:{productId:"68c7ec7771df9723b8ef5085",variantId:"68c7ec7f71df9723b8ef5406"},Endklemmen:{productId:"68c7ec7771df9723b8ef5087",variantId:"68c7ec7f71df9723b8ef542a"},Holzunterleger:{productId:"68c7f04a8fd58d9f974d6eb6",variantId:"68c7f04bb950895d194203e00"},HuaweiOpti:{productId:"68c7ec7471df9723b8ef501e",variantId:"68c7ec7e71df9723b8ef5335"},BRCOpti:{productId:"68c7ec7471df9723b8ef501a",variantId:"68c7ec7b71df9723b8ef510b"}},l={Solarmodul:{productId:"685003af0e41d945fb0198d8",variantId:"685003af4a8e88cb58c89d46"},UlicaSolarBlackJadeFlow:{productId:"689455ed543f0cbb26ba54e9",variantId:"689455ed7d7ddfd326d5dbf9"},SolarmodulPalette:{productId:"68b999a74abecff30536dee0",variantId:"68b999a873f9b0df7954ed8b"},UlicaSolarBlackJadeFlowPalette:{productId:"68b99932fb8af7a115bb2680",variantId:"68b999339e25d980ba33928d"},Endklemmen:{productId:"6853c34fe99f6e3d878db38b",variantId:"6853c350edab8f13fc18c1b9"},Schrauben:{productId:"6853c2782b14f4486dd26f52",variantId:"6853c2798bf6755ddde26a8e"},Dachhaken:{productId:"6853c1d0f350bf620389664c",variantId:"6853c1d04d7c01769211b8d6"},Mittelklemmen:{productId:"68531088654d1468dca962c",variantId:"6853c1084c04541622ba3e26"},Endkappen:{productId:"6853be0895a5a578324f9682",variantId:"6853be0805e96b5a16c705cd"},Schienenverbinder:{productId:"6853c2018bf6755ddde216a8",variantId:"6853c202c488ee61eb51a3dc"},Schiene_240_cm:{productId:"6853bd882f00db0c9a42d653",variantId:"6853bd88c4173dbe72bab10f"},Schiene_360_cm:{productId:"6853bc8f3f6abf360c605142",variantId:"6853bc902f00db0c9a423d97"},MC4_Stecker:{productId:"687fcc9f66078f7098826ccc",variantId:"687fcca02c6537b9a9493fa7"},Solarkabel:{productId:"687fd60dc599f5e95d783f99",variantId:"687fd60dd3a8ae1f00a6d6d1"},Holzunterleger:{productId:"688780821dbbf26153a85117",variantId:"688780ad795c82663cd6e69b"},Erdungsklemme:{productId:"6887e8aaa6ca43c15254d224",variantId:"6887e8abb439562cbc88db5d"},Quetschkabelschuhe:{productId:"68876153200e1a5e28a1b709",variantId:"6887615388988b2ccda11067"},Erdungsband:{productId:"688760e01c9c7973ee287386",variantId:"688760e0835845affc493354"},Tellerkopfschraube:{productId:"688760a7124e867cf2b20051",variantId:"688760a7f246d23f70575fb1"},HuaweiOpti:{productId:"68af2934de0a7fe5d316efbc",variantId:"68af2934c230bc1eaa972585"},BRCOpti:{productId:"68b1e02629cec71ebfc12f0e",variantId:"68b1e02ca05a6b4aca721dc8"}};function m(){return new Promise(function(e){try{if(a)return e(!0);!function(){try{window.PRODUCT_MAP=window.PRODUCT_MAP||l,window.PRODUCT_MAP_BRUTTO=window.PRODUCT_MAP_BRUTTO||s}catch(e){}}(),a=!0,e(!0)}catch(t){a=!0,e(!0)}})}function f(){try{if(Object.keys(l||{}).forEach(function(e){var t=l[e];t&&t.productId&&(r.productIdToKey[t.productId]=e),t&&t.variantId&&(r.variantIdToKey[t.variantId]=e)}),Object.keys(s||{}).forEach(function(e){var t=s[e];t&&t.productId&&(r.productIdToKey[t.productId]=e),t&&t.variantId&&(r.variantIdToKey[t.variantId]=e)}),"object"==typeof PRODUCT_MAP&&PRODUCT_MAP&&Object.keys(PRODUCT_MAP).forEach(function(e){var t=PRODUCT_MAP[e];t&&t.productId&&(r.productIdToKey[t.productId]=e),t&&t.variantId&&(r.variantIdToKey[t.variantId]=e)}),"object"==typeof PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO&&Object.keys(PRODUCT_MAP_BRUTTO).forEach(function(e){var t=PRODUCT_MAP_BRUTTO[e];t&&t.productId&&(r.productIdToKey[t.productId]=e),t&&t.variantId&&(r.variantIdToKey[t.variantId]=e)}),window.solarGrid&&"object"==typeof window.solarGrid){try{var e=window.solarGrid.webflowFormMap||{};Object.keys(e||{}).forEach(function(t){var a=e[t];if(a){var c=a.getAttribute("data-commerce-product-id"),n=a.getAttribute("data-commerce-sku-id");c&&(r.productIdToKey[c]=t),n&&(r.variantIdToKey[n]=t)}})}catch(e){}try{var a=window.solarGrid.webflowFormMapBrutto||{};Object.keys(a||{}).forEach(function(e){var t=a[e];if(t){var c=t.getAttribute("data-commerce-product-id"),n=t.getAttribute("data-commerce-sku-id");c&&(r.productIdToKey[c]=e),n&&(r.variantIdToKey[n]=e)}})}catch(e){}}try{Array.from(document.querySelectorAll('form[data-node-type="commerce-add-to-cart-form"]')).forEach(function(e){var t=e.getAttribute("data-commerce-product-id"),a=e.getAttribute("data-commerce-sku-id");if(t&&!r.productIdToKey[t]){var c=null;Object.keys(l||{}).some(function(e){var r=l[e];return!(!r||r.productId!==t)&&(c=e,!0)}),c||Object.keys(s||{}).some(function(e){var r=s[e];return!(!r||r.productId!==t)&&(c=e,!0)}),c||"object"!=typeof PRODUCT_MAP||Object.keys(PRODUCT_MAP).some(function(e){var r=PRODUCT_MAP[e];return!(!r||r.productId!==t)&&(c=e,!0)}),c||"object"!=typeof PRODUCT_MAP_BRUTTO||Object.keys(PRODUCT_MAP_BRUTTO).some(function(e){var r=PRODUCT_MAP_BRUTTO[e];return!(!r||r.productId!==t)&&(c=e,!0)}),c&&(r.productIdToKey[t]=c)}if(a&&!r.variantIdToKey[a]){var n=null;Object.keys(l||{}).some(function(e){var t=l[e];return!(!t||t.variantId!==a)&&(n=e,!0)}),n||Object.keys(s||{}).some(function(e){var t=s[e];return!(!t||t.variantId!==a)&&(n=e,!0)}),n||"object"!=typeof PRODUCT_MAP||Object.keys(PRODUCT_MAP).some(function(e){var t=PRODUCT_MAP[e];return!(!t||t.variantId!==a)&&(n=e,!0)}),n||"object"!=typeof PRODUCT_MAP_BRUTTO||Object.keys(PRODUCT_MAP_BRUTTO).some(function(e){var t=PRODUCT_MAP_BRUTTO[e];return!(!t||t.variantId!==a)&&(n=e,!0)}),n&&(r.variantIdToKey[a]=n)}})}catch(e){}t=!0}catch(e){}}function p(e,a){return t||f(),a&&r.variantIdToKey[a]?r.variantIdToKey[a]:e&&r.productIdToKey[e]?r.productIdToKey[e]:null}function y(){return document.querySelector(".w-commerce-commercecartlist")||document.querySelector(".w-commerce-commercecartcontainerwrapper")}function v(e,t){try{var r=y();if(!r)return null;for(var a=Array.from(r.querySelectorAll('.w-commerce-commercecartitem, [data-node-type="commerce-cart-item"]')),c=0;c<a.length;c++){var n=a[c],o=n.getAttribute("data-commerce-product-id")||n.querySelector("[data-commerce-product-id]")&&n.querySelector("[data-commerce-product-id]").getAttribute("data-commerce-product-id")||"",d=n.getAttribute("data-commerce-sku-id")||n.querySelector("[data-commerce-sku-id]")&&n.querySelector("[data-commerce-sku-id]").getAttribute("data-commerce-sku-id")||"";if(e&&o===e||t&&d===t)return n}return null}catch(e){return null}}function b(e){return new Promise(function(t){var r=!1,a=y(),c=setTimeout(function(){r||(r=!0,t())},e||1500);if(a){var n=new MutationObserver(function(){r||(r=!0,clearTimeout(c),t());try{n.disconnect()}catch(e){}});try{n.observe(a,{childList:!0,subtree:!0})}catch(e){}}})}function h(e){try{if(!e||!e.length)return;var t=function(){var e="st-removed-items-modal",t=document.getElementById(e);if(t)return t;(t=document.createElement("div")).id=e,t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.style.cssText="position:fixed;inset:0;z-index:99999;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:24px;",t.innerHTML='<div style="max-width:720px;width:100%;background:#fff;border-radius:12px;padding:20px;box-shadow:0 8px 40px rgba(0,0,0,.3);">      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">        <h3 style="margin:0;font-size:20px;">Warenkorb aktualisiert</h3>        <button id="st-removed-close" aria-label="Schließen" style="border:none;background:transparent;font-size:20px;cursor:pointer;">×</button>      </div>      <p style="margin:8px 0 12px;line-height:1.4;">Einige Artikel passen nicht zum ausgewählten Kundentyp und wurden entfernt. Bitte füge die passenden Artikel erneut hinzu.</p>      <div id="st-removed-list" style="display:flex;flex-direction:column;gap:10px;max-height:50vh;overflow:auto;"></div>      <div style="margin-top:16px;display:flex;justify-content:flex-end;gap:10px;">        <button id="st-removed-ok" style="padding:10px 14px;border-radius:8px;border:1px solid #ddd;background:#111;color:#fff;cursor:pointer;">Verstanden</button>      </div>    </div>',document.body.appendChild(t);var r=function(){t.style.display="none"};try{t.querySelector("#st-removed-close").addEventListener("click",r)}catch(e){}try{t.querySelector("#st-removed-ok").addEventListener("click",r)}catch(e){}return t}(),r=t.querySelector("#st-removed-list");r.innerHTML="",e.forEach(function(e){var t=document.createElement("div");t.style.cssText="display:flex;align-items:center;gap:10px;border:1px solid #eee;border-radius:8px;padding:8px;";var a=document.createElement("img");a.src=e.img||"",a.alt=e.name||"",a.style.cssText="width:56px;height:56px;object-fit:cover;border-radius:6px;background:#f5f5f5;";var c=document.createElement("div");c.style.cssText="display:flex;flex-direction:column;gap:2px;";var n=document.createElement("div");n.textContent=e.name||e.key||"Produkt",n.style.cssText="font-weight:600;";var o=document.createElement("div");o.textContent="Menge: "+(e.qty||1),o.style.cssText="font-size:12px;color:#666;",c.appendChild(n),c.appendChild(o),t.appendChild(a),t.appendChild(c),r.appendChild(t)}),t.style.display="flex"}catch(e){}}function g(r){try{e&&clearTimeout(e);var a=++d,i=Math.max(0,r||250),l=function(){if(!(a<d))if(c)e=setTimeout(l,200);else{var r=Date.now(),i=Math.max(0,2e3-(r-n));i>0?e=setTimeout(l,i):async function(){try{if(c)return;if(Date.now()-n<o)return;if(document.hidden)return;try{if(window.solarGrid&&window.solarGrid.isAddingToCart)return}catch(e){}try{var e=document.querySelector(".w-commerce-commercecartcontainerwrapper");if(e){var r=window.getComputedStyle(e),a=document.body&&document.body.classList&&(document.body.classList.contains("w-commerce-commercecartopen")||document.body.classList.contains("wf-commerce-cart-open")),d=e.querySelector('[role="dialog"], .w-commerce-commercecartcontainer'),i=!!d&&("none"!==(S=window.getComputedStyle(d)).display&&"hidden"!==S.visibility);if("none"!==r.display&&"hidden"!==r.visibility&&(a||i))return}}catch(e){}c=!0;var l=y();if(!l)return;var m=Array.from(l.querySelectorAll('.w-commerce-commercecartitem, [data-node-type="commerce-cart-item"]'));if(!m.length)return;var b=m.map(function(e){var t=function(e){try{var t=e.querySelector("[data-commerce-sku-id], [data-commerce-product-id]")||e;return{productId:t.getAttribute("data-commerce-product-id")||"",variantId:t.getAttribute("data-commerce-sku-id")||""}}catch(e){return{productId:"",variantId:""}}}(e),r=p(t.productId,t.variantId),a=function(e){try{var t=e.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]'),r=t?parseInt(t.value,10):NaN;return isFinite(r)&&r>0?r:1}catch(e){return 1}}(e),c=function(e){try{for(var t="",r=[".w-commerce-commercecartproductname",'[data-node-type*="product" i]',".text-block-18",".text-block-5","h1,h2,h3,h4,div,span"],a=0;a<r.length;a++){var c=e.querySelector(r[a]);if(c&&(c.textContent||"").trim()){t=(c.textContent||"").trim();break}}var n="",o=e.querySelector("img");return o&&(n=o.getAttribute("src")||o.getAttribute("data-src")||""),{name:t,img:n}}catch(e){return{name:"",img:""}}}(e);if(!c.name){var n=function(e){try{return{name:"object"==typeof PRODUCT_NAME_MAP&&PRODUCT_NAME_MAP[e]||e,img:"object"==typeof PRODUCT_IMAGES&&PRODUCT_IMAGES[e]||""}}catch(t){return{name:e,img:""}}}(r||"");c.name=c.name||n.name,c.img=c.img||n.img}return{productId:t.productId,variantId:t.variantId,key:r,qty:a,name:c.name,img:c.img}});t||f();try{window.solarGrid&&"function"==typeof window.solarGrid.hideCartContainer&&window.solarGrid.hideCartContainer()}catch(e){}for(var g=[],I=0;I<b.length;I++){var T=b[I];if(T.key){var P=u(),_=!1;try{_=Object.keys(s||{}).some(function(e){var t=s[e];return t&&(t.productId===T.productId||t.variantId===T.variantId)})}catch(e){}if(P!==_){var C=v(T.productId,T.variantId);C&&(await w(C),g.push({key:T.key,name:T.name||T.key,qty:T.qty,img:T.img}),await new Promise(function(e){setTimeout(e,100)}))}}}g.length&&h(g);try{var O=document.querySelector(".w-commerce-commercecartcontainerwrapper");if(O)"none"===window.getComputedStyle(O).display||(O.style.display="");document.body&&document.body.classList&&document.body.classList.remove("w-commerce-commercecartopen","wf-commerce-cart-open")}catch(e){}}catch(e){console.warn("Cart-Kompatibilitätsprüfung fehlgeschlagen:",e)}finally{c=!1,n=Date.now()}var S}()}};e=setTimeout(l,i)}catch(e){}}async function w(e){try{var t=function(e){for(var t=['[data-wf-cart-action="remove-item"]','[data-wf-cart-action*="remove" i]','[data-node-type="commerce-cart-remove-link"]','[data-node-type*="remove" i]','a[role="button"][aria-label*="remove" i]','button[aria-label*="remove" i]',".w-commerce-commercecartremovebutton",".w-commerce-commercecartremove"],r=0;r<t.length;r++){var a=e.querySelector(t[r]);if(a)return a}try{var c=Array.from(e.querySelectorAll("a,button,div,span")).filter(function(e){var t=(e.textContent||"").trim().toLowerCase();return"entfernen"===t||"remove"===t||t.indexOf("entfernen")>=0||t.indexOf("remove")>=0});if(c.length)return c[0]}catch(e){}return null}(e);if(!t)return;t.click(),await b(1500)}catch(e){console.warn("Cart: Entfernen fehlgeschlagen",e)}}window.CartCompatibility={init:function(){try{m().then(function(){if(window.solarGrid&&(window.solarGrid.generateHiddenCartForms||window.solarGrid.ensureWebflowFormsMapped))try{(window.solarGrid.ensureWebflowFormsMapped||window.solarGrid.generateHiddenCartForms).call(window.solarGrid)}catch(e){}t||f(),function(){try{var e=y();if(e){var t=new MutationObserver(function(){g(500)});try{t.observe(e,{childList:!0,subtree:!0})}catch(e){}}var r=new MutationObserver(function(){g(800)});try{r.observe(document.body,{childList:!0,subtree:!0})}catch(e){}}catch(e){}}(),g(300)})}catch(e){}},schedule:function(e){try{window.solarGrid&&"function"==typeof window.solarGrid.hideCartContainer&&window.solarGrid.hideCartContainer()}catch(e){}g(e)}}}(),function(){function e(e){try{document.cookie="ukc_customer_type="+encodeURIComponent(e)+";path=/;max-age=31536000;SameSite=Lax",localStorage.setItem("ukc_customer_type",e)}catch(e){}}try{var t=location&&location.hostname||"";if(t.endsWith("unterkonstruktion.de")){var r=function(){try{var e=document.cookie.match(/(?:^|; )ukc_customer_type=([^;]+)/);if(e)return decodeURIComponent(e[1]);try{var t=window.localStorage.getItem("ukc_customer_type");if(t)return t}catch(e){}try{var r=window.localStorage.getItem("solarTool_customerType");if(r){var a=JSON.parse(r);if(a&&a.type)return"business"===a.type?"business":"private"}}catch(e){}return"private"}catch(e){return"private"}}();try{e(r)}catch(e){}document.addEventListener("click",function(e){var t=e&&e.target&&e.target.closest&&e.target.closest("a[href]");if(t){var a=t.getAttribute("href")||"";if(a){var c=new URL(a,location.href);c.hostname&&c.hostname.endsWith("foxycart.com")&&(c.searchParams.set("customer_type",r),t.setAttribute("href",c.toString()))}}},!0)}else if(t.endsWith("foxycart.com")){var a=null;try{a=new URL(location.href).searchParams.get("customer_type")}catch(e){a=null}a&&e(a)}}catch(e){}}(),function(){function e(e){try{var t=e&&e.querySelector&&e.querySelector('input[name="customer_type"]');t&&(t.value=function(){try{var e=document.cookie.match(/(?:^|; )ukc_customer_type=([^;]+)/);if(e)return decodeURIComponent(e[1]);var t=localStorage.getItem("ukc_customer_type");if(t)return t;try{var r=localStorage.getItem("solarTool_customerType");if(r){var a=JSON.parse(r);if(a&&a.type)return"business"===a.type?"business":"private"}}catch(e){}}catch(e){}return"private"}())}catch(e){}}function t(e){try{var t=e&&e.getAttribute&&e.getAttribute("action")||"";return/foxycart\.com\/cart/i.test(t||"")}catch(e){return!1}}function r(){try{for(var r=Array.prototype.slice.call(document.querySelectorAll("form")),a=0;a<r.length;a++){var c=r[a];if(t(c)){e(c);try{c.addEventListener("submit",function(t){e(t.currentTarget||c)},!0)}catch(e){}}}}catch(e){}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}();