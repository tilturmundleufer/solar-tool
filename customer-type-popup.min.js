function normalizeSearchText(t){try{return(t||"").toString().toLowerCase().replace(/\s+/g," ").trim()}catch(t){return""}}!function(){function t(){return"private"===p()}function e(){return"business"===p()}function r(){try{const e=["#gewerbe",'[data-customer-type="gewerbe"]','[data-customer-segment="gewerbe"]','[data-list="gewerbe"]',".collection-list-gewerbe"],r=t=>t.flatMap(t=>Array.from(document.querySelectorAll(t))),a=(t,e)=>t.forEach(t=>{t&&t.style&&(t.style.display=e?"none":"")}),c=r(["#privat",'[data-customer-type="privat"]','[data-customer-segment="privat"]','[data-list="privat"]',".collection-list-privat"]),o=r(e);a(c,!t()),a(o,t())}catch(t){}}function a(){try{const e=document.getElementById("nav-private"),r=document.getElementById("nav-business");e&&e.classList&&e.classList.toggle("stp-btn-active",t()),r&&r.classList&&r.classList.toggle("stp-btn-active",!t());const a=document.querySelector(".customer-type-switch");a&&a.classList&&(a.classList.toggle("is-private",t()),a.classList.toggle("is-business",!t()))}catch(t){}}var c=!1;function o(t){try{const a=["#privat",'[data-customer-type="privat"]','[data-customer-segment="privat"]','[data-list="privat"]',".collection-list-privat"].concat(["#gewerbe",'[data-customer-type="gewerbe"]','[data-customer-segment="gewerbe"]','[data-list="gewerbe"]',".collection-list-gewerbe"]);for(var e=t;e&&e!==document;){for(var r=0;r<a.length;r++)try{if(e.matches&&e.matches(a[r]))return e}catch(t){}e=e.parentElement}return null}catch(t){return null}}function n(t){try{var r=e(),a=(t.getAttribute("data-price-resolved")||"").toLowerCase();if("brutto"===a)return!0===r;if("netto"===a)return!1===r;var c=l(t);if(c.variantId){var o=resolvePriceTypeFromVariantId(c.variantId);if(o)return t.setAttribute("data-price-resolved",o),r?"brutto"===o:"netto"===o}var n=function(t){try{var e=(t.getAttribute("data-price-type")||"").toLowerCase();if("brutto"===e)return"brutto";if("netto"===e)return"netto";var r=(t.getAttribute("data-customer-type")||"").toLowerCase();if("gewerbe"===r)return"brutto";if("privat"===r)return"netto";var a=(t.getAttribute("data-brutto")||"").toLowerCase();if("true"===a||"1"===a)return"brutto";var c=t.querySelector("a[href]"),o=(c&&c.textContent+" "+c.getAttribute("href")||t.textContent||"").toLowerCase();if(/inkl\.?\s*mwst|brutto/.test(o))return"brutto";if(/exkl\.?\s*mwst|ohne\s*mwst|netto/.test(o))return"netto";if(/-inkl-mwst/.test(o))return"brutto";if(/-exkl-mwst/.test(o))return"netto"}catch(t){}return null}(t);return n?(t.setAttribute("data-price-resolved",n),r?"brutto"===n:"netto"===n):!r}catch(t){return!0}}var d=Object.create(null),i=Object.create(null);function u(t,e){try{idMapsBuilt||buildReverseMaps()}catch(t){}if(e&&i[e])return i[e];if(t&&i[t])return i[t];var r=null;try{if(e&&(Object.keys(POPUP_PRODUCT_MAP_BRUTTO||{}).some(function(t){var r=POPUP_PRODUCT_MAP_BRUTTO[t];return r&&r.variantId===e})&&(r="brutto"),!r&&Object.keys(POPUP_PRODUCT_MAP_NETTO||{}).some(function(t){var r=POPUP_PRODUCT_MAP_NETTO[t];return r&&r.variantId===e})&&(r="netto")),!r&&t&&(Object.keys(POPUP_PRODUCT_MAP_BRUTTO||{}).some(function(e){var r=POPUP_PRODUCT_MAP_BRUTTO[e];return r&&r.productId===t})&&(r="brutto"),!r&&Object.keys(POPUP_PRODUCT_MAP_NETTO||{}).some(function(e){var r=POPUP_PRODUCT_MAP_NETTO[e];return r&&r.productId===t})&&(r="netto")),!r){var a=e&&idToKey.variantIdToKey[e],c=t&&idToKey.productIdToKey[t],o=a||c||null;if(o){var n=POPUP_PRODUCT_MAP_BRUTTO&&POPUP_PRODUCT_MAP_BRUTTO[o]||"object"==typeof PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO[o],d=POPUP_PRODUCT_MAP_NETTO&&POPUP_PRODUCT_MAP_NETTO[o]||"object"==typeof PRODUCT_MAP&&PRODUCT_MAP&&PRODUCT_MAP[o];!n||n.variantId!==e&&n.productId!==t?!d||d.variantId!==e&&d.productId!==t||(r="netto"):r="brutto"}}}catch(t){}return e&&r&&(i[e]=r),t&&r&&(i[t]=r),r}function l(t){try{var e=t.querySelector("[data-commerce-sku-id], [data-commerce-product-id]")||t,r=e.getAttribute("data-commerce-product-id")||"",a=e.getAttribute("data-commerce-sku-id")||"";if(!a){var c=t.querySelector("a[data-commerce-sku-id], a[data-commerce-product-id]");c&&(r=r||c.getAttribute("data-commerce-product-id")||"",a=c.getAttribute("data-commerce-sku-id")||"")}return{productId:r,variantId:a}}catch(t){return{productId:"",variantId:""}}}async function s(t){try{var e=l(t);if(e.productId||e.variantId)return e;var r=t.querySelector("a[href]");if(!r)return e;var a=r.getAttribute("href");if(!a)return e;if(d[a])return d[a];var c=await fetch(a,{credentials:"omit",cache:"force-cache"}).catch(function(){return null});if(!c||!c.ok)return d[a]=e,e;var o=await c.text().catch(function(){return""}),n=null;try{n=(new DOMParser).parseFromString(o,"text/html")}catch(t){n=null}if(n){var i=n.querySelector('form[data-node-type="commerce-add-to-cart-form"]');i&&(e.productId=i.getAttribute("data-commerce-product-id")||"",e.variantId=i.getAttribute("data-commerce-sku-id")||"")}return d[a]=e,e}catch(t){return{productId:"",variantId:""}}}async function f(r,a,c){try{var o=e(),n=r.querySelectorAll('[data-search="cms-item-'+a+'"], [data-search="cms_item_'+a+'"]'),d=!1,i=!1;try{i=localStorage&&"1"===localStorage.getItem("CMS_SEARCH_DEBUG")}catch(t){}for(var f=0;f<n.length;f++){var m=n[f],y=m.getAttribute("data-price-resolved");if(!y){var p=l(m),v=u(p.productId,p.variantId)||null;if(v&&(y=v,m.setAttribute("data-price-resolved",y),d=!0),!y&&t())i&&console.warn("[CMS-SEARCH] skip fetch for private; no local ids",p);else if(!y){var b=await s(m);(y=u(b.productId,b.variantId)||null)&&(m.setAttribute("data-price-resolved",y),d=!0)}}var h=(m.textContent||"").toString().toLowerCase(),w=(!c||-1!==h.indexOf(c))&&(!y||(o?"brutto"===y:"netto"===y));if(m.style.display=w?"":"none",i)try{var I=l(m);console.log("[CMS-SEARCH] refine item",{finalType:y,preferBrutto:o,shouldShow:w,vid:I.variantId,pid:I.productId})}catch(t){}}if(d){for(var T=n.length,g=0,P=0;P<n.length;P++)"none"===getComputedStyle(n[P]).display&&g++;var C=r.querySelector('[data-div="noResult-'+a+'"], [data-div="noResult_'+a+'"]');C&&(C.style.display=T>0&&g===T&&""!==c?"":"none")}}catch(t){}}function m(t){try{try{localStorage&&"1"===localStorage.getItem("CMS_SEARCH_DEBUG")}catch(t){}var r=(t.getAttribute("data-input")||"").toString().match(/^search-(.+)$/);if(!r)return;var a=r[1],c=o(t)||document,d=(t.value||"").toString().toLowerCase(),i=c.querySelectorAll('[data-search="cms-item-'+a+'"], [data-search="cms_item_'+a+'"]');try{console.warn("[CMS-SEARCH] handle input",{type:e()?"business":"private",key:a,term:d,items:i.length})}catch(t){}if(""===d){for(var u=0;u<i.length;u++)i[u].style.display=n(i[u])?"":"none";var s=c.querySelector('[data-div="noResult-'+a+'"]');if(s&&(s.style.display="none"),"true"===(t.getAttribute("data-url")||"").toString().toLowerCase())try{var y=new URL(window.location.href);y.searchParams.delete("search-"+a),window.history.pushState({},"",y)}catch(t){}try{f(c,a,"")}catch(t){}return}for(var p=0;p<i.length;p++){var v=i[p],b=v.querySelectorAll('[data-text="search-'+a+'"], [data-text="search_'+a+'"]'),h="";if(b&&b.length)for(var w=0;w<b.length;w++)h+=" "+(b[w].textContent||"");if(!h){var I=v.querySelector("a");h=I?I.textContent||"":v.textContent||""}var T=normalizeSearchText(h),g=-1!==T.indexOf(normalizeSearchText(d))&&n(v);if(g){v.style.display="";try{"none"===getComputedStyle(v).display&&(v.style.display="block")}catch(t){}0}else v.style.display="none";try{var P=l(v);console.log("[CMS-SEARCH] item",{vid:P.variantId,pid:P.productId,match:g,textLen:T.length})}catch(t){}}for(var C=i.length,S=0,A=0;A<i.length;A++)"none"===getComputedStyle(i[A]).display&&S++;var O=c.querySelector('[data-div="noResult-'+a+'"], [data-div="noResult_'+a+'"]');O&&(O.style.display=C>0&&S===C?"":"none");try{var _=c.querySelector('.search-cms-wrapper, [role="list"]')||i[0]&&i[0].parentElement;_&&(_.style.display="","none"===getComputedStyle(_).display&&(_.style.display="block"))}catch(t){}if("true"===(t.getAttribute("data-url")||"").toString().toLowerCase())try{var R=new URL(window.location.href);R.searchParams.set("search-"+a,t.value),window.history.pushState({},"",R)}catch(t){}try{console.warn("[CMS-SEARCH] refine async"),clearTimeout(m._rto),m._rto=setTimeout(function(){f(c,a,d)},120)}catch(t){}}catch(t){}}function y(t){!function(t){try{const e=Date.now()+1728e5;localStorage.setItem("solarTool_customerType",JSON.stringify({type:t,expiresAt:e}))}catch(t){}}("business"===t?"business":"private"),r(),a();try{!function(){try{for(var t=document.querySelectorAll('[data-input^="search-"]'),e=0;e<t.length;e++){var r=t[e],a=r.value||"",c=(r.getAttribute("data-input")||"").match(/^search-(.+)$/);if(c){var d=c[1],i=o(r)||document;try{for(var u=i.querySelectorAll('[data-search="cms-item-'+d+'"], [data-search="cms_item_'+d+'"]'),l=0;l<u.length;l++)u[l].removeAttribute("data-price-resolved")}catch(t){}if(""!==a)m(r);else{for(var s=i.querySelectorAll('[data-search="cms-item-'+d+'"], [data-search="cms_item_'+d+'"]'),y=0;y<s.length;y++){var p=s[y],v=n(p);p.style.display=v?"":"none"}var b=i.querySelector('[data-div="noResult-'+d+'"], [data-div="noResult_'+d+'"]');b&&(b.style.display="none");try{var h=i.querySelector('.search-cms-wrapper, [role="list"]')||s[0]&&s[0].parentElement;h&&(h.style.display="","none"===getComputedStyle(h).display&&(h.style.display="block"))}catch(t){}try{f(i,d,"")}catch(t){}}}}}catch(t){}}()}catch(t){}try{window.solarGrid&&(window.solarGrid.updateCurrentTotalPrice&&window.solarGrid.updateCurrentTotalPrice(),window.solarGrid.updateOverviewTotalPrice&&window.solarGrid.updateOverviewTotalPrice(),(window.solarGrid.ensureWebflowFormsMapped||window.solarGrid.generateHiddenCartForms)?.call(window.solarGrid))}catch(t){}try{window.CartCompatibility&&"function"==typeof window.CartCompatibility.schedule&&window.CartCompatibility.schedule(150)}catch(t){}}function p(){try{const t=localStorage.getItem("solarTool_customerType");if(!t)return null;const e=JSON.parse(t);return e&&e.type?"number"==typeof e.expiresAt&&Date.now()>e.expiresAt?(localStorage.removeItem("solarTool_customerType"),null):"private"===e.type?"private":"business":null}catch(t){return null}}function v(){const t=document.getElementById("customer-type-overlay");t&&(t.style.display="none",t.setAttribute("aria-hidden","true"))}function b(){const t=document.getElementById("nav-private"),e=document.getElementById("nav-business");t&&t.addEventListener("click",function(){y("private")}),e&&e.addEventListener("click",function(){y("business")});if(document.getElementById("customer-type-overlay")){const t=p(),e=document.getElementById("stp-private"),r=document.getElementById("stp-business");e&&e.addEventListener("click",function(){y("private"),v()}),r&&r.addEventListener("click",function(){y("business"),v()}),t||function(){const t=document.getElementById("customer-type-overlay");t&&(t.style.display="flex",t.setAttribute("aria-hidden","false"))}()}r(),a();try{!function(){try{if(c)return;c=!0;try{console.warn("[CMS-SEARCH] init binding events")}catch(t){}try{localStorage&&localStorage.getItem("CMS_SEARCH_DEBUG")}catch(t){}document.addEventListener("input",function(t){var e=t.target;try{if(!e||!e.matches||!e.matches('[data-input^="search-"]'))return}catch(t){return}try{console.warn("[CMS-SEARCH] input event fired")}catch(t){}m(e)},!0),document.addEventListener("keyup",function(t){var e=t.target;try{if(!e||!e.matches||!e.matches('[data-input^="search-"]'))return}catch(t){return}try{console.warn("[CMS-SEARCH] keyup event fired")}catch(t){}m(e)},!0);for(var t=document.querySelectorAll('[data-input^="search-"]'),e=0;e<t.length;e++){var r=t[e],a=(r.getAttribute("data-input")||"").match(/^search-(.+)$/);if(a){var n=a[1],d=o(r)||document,i=d.querySelector('[data-div="noResult-'+n+'"], [data-div="noResult_'+n+'"]');i&&(i.style.display="none");try{if("true"===(r.getAttribute("data-url")||"").toString().toLowerCase()){var u=new URLSearchParams(window.location.search).get("search-"+n);u&&(r.value=u,m(r))}}catch(t){}try{m(r)}catch(t){}try{console.warn("[CMS-SEARCH] init refine for",{key:n}),f(d,n,(r.value||"").toString().toLowerCase())}catch(t){}}}}catch(t){}}()}catch(t){}try{CartCompatibility.init()}catch(t){}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",b):b()}(),function(){var t=null,e=!1,r={productIdToKey:{},variantIdToKey:{}},a=!1,c=!1,o=0,n=2e3,d=0;function i(){try{const t=localStorage.getItem("solarTool_customerType");if(!t)return null;const e=JSON.parse(t);return e&&e.type?"number"==typeof e.expiresAt&&Date.now()>e.expiresAt?(localStorage.removeItem("solarTool_customerType"),null):"private"===e.type?"private":"business":null}catch(t){return null}}function u(){return"business"===i()}const l={Solarmodul:{productId:"68c7ec7571df9723b8ef5050",variantId:"68c7ec7e71df9723b8ef53cd"},UlicaSolarBlackJadeFlow:{productId:"68c7ef7fbeeaadb13262a062",variantId:"68c7ef7ff397fcf9d6d7571e"},SolarmodulPalette:{productId:"68c7ec7471df9723b8ef5008",variantId:"68c7ec7c71df9723b8ef5160"},UlicaSolarBlackJadeFlowPalette:{productId:"68c7ec7471df9723b8ef5006",variantId:"68c7ec7d71df9723b8ef5187"},Quetschkabelschuhe:{productId:"68c7ec7471df9723b8ef502d",variantId:"68c7ec7c71df9723b8ef514b"},Solarkabel:{productId:"68c7ec7471df9723b8ef5031",variantId:"68c7ec7d71df9723b8ef5205"},Erdungsband:{productId:"68c7ec7471df9723b8ef5033",variantId:"68c7ec7c71df9723b8ef5159"},Endkappen:{productId:"68c7ec7471df9723b8ef5041",variantId:"68c7ec7e71df9723b8ef533e"},Mittelklemmen:{productId:"68c7ec7471df9723b8ef5043",variantId:"68c7ec7e71df9723b8ef53e0"},Dachhaken:{productId:"68c7ec7471df9723b8ef5045",variantId:"68c7ec7f71df9723b8ef54f9"},Schiene_360_cm:{productId:"68c7ec7471df9723b8ef5047",variantId:"68c7ec7e71df9723b8ef53d6"},Schienenverbinder:{productId:"68c7ec7471df9723b8ef5049",variantId:"68c7ec7e71df9723b8ef533b"},Schiene_240_cm:{productId:"68c7ec7471df9723b8ef504b",variantId:"68c7ec7e71df9723b8ef5387"},MC4_Stecker:{productId:"68c7ec7671df9723b8ef506e",variantId:"68c7ec7d71df9723b8ef5230"},Tellerkopfschraube:{productId:"68c7ec7671df9723b8ef5072",variantId:"68c7ec7f71df9723b8ef544a"},Schrauben:{productId:"68c7ec7771df9723b8ef5085",variantId:"68c7ec7f71df9723b8ef5406"},Endklemmen:{productId:"68c7ec7771df9723b8ef5087",variantId:"68c7ec7f71df9723b8ef542a"},Holzunterleger:{productId:"68c7f04a8fd58d9f974d6eb6",variantId:"68c7f04bb950895d194203e00"},HuaweiOpti:{productId:"68c7ec7471df9723b8ef501e",variantId:"68c7ec7e71df9723b8ef5335"},BRCOpti:{productId:"68c7ec7471df9723b8ef501a",variantId:"68c7ec7b71df9723b8ef510b"}},s={Solarmodul:{productId:"685003af0e41d945fb0198d8",variantId:"685003af4a8e88cb58c89d46"},UlicaSolarBlackJadeFlow:{productId:"689455ed543f0cbb26ba54e9",variantId:"689455ed7d7ddfd326d5dbf9"},SolarmodulPalette:{productId:"68b999a74abecff30536dee0",variantId:"68b999a873f9b0df7954ed8b"},UlicaSolarBlackJadeFlowPalette:{productId:"68b99932fb8af7a115bb2680",variantId:"68b999339e25d980ba33928d"},Endklemmen:{productId:"6853c34fe99f6e3d878db38b",variantId:"6853c350edab8f13fc18c1b9"},Schrauben:{productId:"6853c2782b14f4486dd26f52",variantId:"6853c2798bf6755ddde26a8e"},Dachhaken:{productId:"6853c1d0f350bf620389664c",variantId:"6853c1d04d7c01769211b8d6"},Mittelklemmen:{productId:"68531088654d1468dca962c",variantId:"6853c1084c04541622ba3e26"},Endkappen:{productId:"6853be0895a5a578324f9682",variantId:"6853be0805e96b5a16c705cd"},Schienenverbinder:{productId:"6853c2018bf6755ddde216a8",variantId:"6853c202c488ee61eb51a3dc"},Schiene_240_cm:{productId:"6853bd882f00db0c9a42d653",variantId:"6853bd88c4173dbe72bab10f"},Schiene_360_cm:{productId:"6853bc8f3f6abf360c605142",variantId:"6853bc902f00db0c9a423d97"},MC4_Stecker:{productId:"687fcc9f66078f7098826ccc",variantId:"687fcca02c6537b9a9493fa7"},Solarkabel:{productId:"687fd60dc599f5e95d783f99",variantId:"687fd60dd3a8ae1f00a6d6d1"},Holzunterleger:{productId:"688780821dbbf26153a85117",variantId:"688780ad795c82663cd6e69b"},Erdungsklemme:{productId:"6887e8aaa6ca43c15254d224",variantId:"6887e8abb439562cbc88db5d"},Quetschkabelschuhe:{productId:"68876153200e1a5e28a1b709",variantId:"6887615388988b2ccda11067"},Erdungsband:{productId:"688760e01c9c7973ee287386",variantId:"688760e0835845affc493354"},Tellerkopfschraube:{productId:"688760a7124e867cf2b20051",variantId:"688760a7f246d23f70575fb1"},HuaweiOpti:{productId:"68af2934de0a7fe5d316efbc",variantId:"68af2934c230bc1eaa972585"},BRCOpti:{productId:"68b1e02629cec71ebfc12f0e",variantId:"68b1e02ca05a6b4aca721dc8"}};function f(){return new Promise(function(t){try{if(a)return t(!0);!function(){try{window.PRODUCT_MAP=window.PRODUCT_MAP||s,window.PRODUCT_MAP_BRUTTO=window.PRODUCT_MAP_BRUTTO||l}catch(t){}}(),a=!0,t(!0)}catch(e){a=!0,t(!0)}})}function m(){try{if(Object.keys(s||{}).forEach(function(t){var e=s[t];e&&e.productId&&(r.productIdToKey[e.productId]=t),e&&e.variantId&&(r.variantIdToKey[e.variantId]=t)}),Object.keys(l||{}).forEach(function(t){var e=l[t];e&&e.productId&&(r.productIdToKey[e.productId]=t),e&&e.variantId&&(r.variantIdToKey[e.variantId]=t)}),"object"==typeof PRODUCT_MAP&&PRODUCT_MAP&&Object.keys(PRODUCT_MAP).forEach(function(t){var e=PRODUCT_MAP[t];e&&e.productId&&(r.productIdToKey[e.productId]=t),e&&e.variantId&&(r.variantIdToKey[e.variantId]=t)}),"object"==typeof PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO&&Object.keys(PRODUCT_MAP_BRUTTO).forEach(function(t){var e=PRODUCT_MAP_BRUTTO[t];e&&e.productId&&(r.productIdToKey[e.productId]=t),e&&e.variantId&&(r.variantIdToKey[e.variantId]=t)}),window.solarGrid&&"object"==typeof window.solarGrid){try{var t=window.solarGrid.webflowFormMap||{};Object.keys(t||{}).forEach(function(e){var a=t[e];if(a){var c=a.getAttribute("data-commerce-product-id"),o=a.getAttribute("data-commerce-sku-id");c&&(r.productIdToKey[c]=e),o&&(r.variantIdToKey[o]=e)}})}catch(t){}try{var a=window.solarGrid.webflowFormMapBrutto||{};Object.keys(a||{}).forEach(function(t){var e=a[t];if(e){var c=e.getAttribute("data-commerce-product-id"),o=e.getAttribute("data-commerce-sku-id");c&&(r.productIdToKey[c]=t),o&&(r.variantIdToKey[o]=t)}})}catch(t){}}try{Array.from(document.querySelectorAll('form[data-node-type="commerce-add-to-cart-form"]')).forEach(function(t){var e=t.getAttribute("data-commerce-product-id"),a=t.getAttribute("data-commerce-sku-id");if(e&&!r.productIdToKey[e]){var c=null;Object.keys(s||{}).some(function(t){var r=s[t];return!(!r||r.productId!==e)&&(c=t,!0)}),c||Object.keys(l||{}).some(function(t){var r=l[t];return!(!r||r.productId!==e)&&(c=t,!0)}),c||"object"!=typeof PRODUCT_MAP||Object.keys(PRODUCT_MAP).some(function(t){var r=PRODUCT_MAP[t];return!(!r||r.productId!==e)&&(c=t,!0)}),c||"object"!=typeof PRODUCT_MAP_BRUTTO||Object.keys(PRODUCT_MAP_BRUTTO).some(function(t){var r=PRODUCT_MAP_BRUTTO[t];return!(!r||r.productId!==e)&&(c=t,!0)}),c&&(r.productIdToKey[e]=c)}if(a&&!r.variantIdToKey[a]){var o=null;Object.keys(s||{}).some(function(t){var e=s[t];return!(!e||e.variantId!==a)&&(o=t,!0)}),o||Object.keys(l||{}).some(function(t){var e=l[t];return!(!e||e.variantId!==a)&&(o=t,!0)}),o||"object"!=typeof PRODUCT_MAP||Object.keys(PRODUCT_MAP).some(function(t){var e=PRODUCT_MAP[t];return!(!e||e.variantId!==a)&&(o=t,!0)}),o||"object"!=typeof PRODUCT_MAP_BRUTTO||Object.keys(PRODUCT_MAP_BRUTTO).some(function(t){var e=PRODUCT_MAP_BRUTTO[t];return!(!e||e.variantId!==a)&&(o=t,!0)}),o&&(r.variantIdToKey[a]=o)}})}catch(t){}e=!0}catch(t){}}function y(t,a){return e||m(),a&&r.variantIdToKey[a]?r.variantIdToKey[a]:t&&r.productIdToKey[t]?r.productIdToKey[t]:null}function p(){return document.querySelector(".w-commerce-commercecartlist")||document.querySelector(".w-commerce-commercecartcontainerwrapper")}function v(t,e){try{var r=p();if(!r)return null;for(var a=Array.from(r.querySelectorAll('.w-commerce-commercecartitem, [data-node-type="commerce-cart-item"]')),c=0;c<a.length;c++){var o=a[c],n=o.getAttribute("data-commerce-product-id")||o.querySelector("[data-commerce-product-id]")&&o.querySelector("[data-commerce-product-id]").getAttribute("data-commerce-product-id")||"",d=o.getAttribute("data-commerce-sku-id")||o.querySelector("[data-commerce-sku-id]")&&o.querySelector("[data-commerce-sku-id]").getAttribute("data-commerce-sku-id")||"";if(t&&n===t||e&&d===e)return o}return null}catch(t){return null}}function b(t){return new Promise(function(e){var r=!1,a=p(),c=setTimeout(function(){r||(r=!0,e())},t||1500);if(a){var o=new MutationObserver(function(){r||(r=!0,clearTimeout(c),e());try{o.disconnect()}catch(t){}});try{o.observe(a,{childList:!0,subtree:!0})}catch(t){}}})}function h(r){try{t&&clearTimeout(t);var a=++d,i=Math.max(0,r||250),s=function(){if(!(a<d))if(c)t=setTimeout(s,200);else{var r=Date.now(),i=Math.max(0,2e3-(r-o));i>0?t=setTimeout(s,i):async function(){try{if(c)return;if(Date.now()-o<n)return;if(document.hidden)return;try{if(window.solarGrid&&window.solarGrid.isAddingToCart)return}catch(t){}try{var t=document.querySelector(".w-commerce-commercecartcontainerwrapper");if(t){var r=window.getComputedStyle(t),a=document.body&&document.body.classList&&(document.body.classList.contains("w-commerce-commercecartopen")||document.body.classList.contains("wf-commerce-cart-open")),d=t.querySelector('[role="dialog"], .w-commerce-commercecartcontainer'),i=!!d&&("none"!==(_=window.getComputedStyle(d)).display&&"hidden"!==_.visibility);if("none"!==r.display&&"hidden"!==r.visibility&&(a||i))return}}catch(t){}c=!0;var s=p();if(!s)return;var f=Array.from(s.querySelectorAll('.w-commerce-commercecartitem, [data-node-type="commerce-cart-item"]'));if(!f.length)return;var b=f.map(function(t){var e=function(t){try{var e=t.querySelector("[data-commerce-sku-id], [data-commerce-product-id]")||t;return{productId:e.getAttribute("data-commerce-product-id")||"",variantId:e.getAttribute("data-commerce-sku-id")||""}}catch(t){return{productId:"",variantId:""}}}(t),r=y(e.productId,e.variantId),a=function(t){try{var e=t.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]'),r=e?parseInt(e.value,10):NaN;return isFinite(r)&&r>0?r:1}catch(t){return 1}}(t);return{productId:e.productId,variantId:e.variantId,key:r,qty:a}});e||m();try{window.solarGrid&&"function"==typeof window.solarGrid.hideCartContainer&&window.solarGrid.hideCartContainer()}catch(t){}for(var h=0;h<b.length;h++){var T=b[h],g=T.key,P=v(T.productId,T.variantId);if(g){var C=u(),S=!1;try{S=Object.keys(l||{}).some(function(t){var e=l[t];return e&&(e.productId===ids.productId||e.variantId===ids.variantId)})}catch(t){}if(C!==S){var A=Math.max(1,parseInt(T.qty||"1",10));P&&await w(P),await I(g,A),await new Promise(function(t){setTimeout(t,120)})}}else console.warn("[CartCompat] Unbekanntes Produkt im Warenkorb; wird ignoriert.")}try{var O=document.querySelector(".w-commerce-commercecartcontainerwrapper");if(O)"none"===window.getComputedStyle(O).display||(O.style.display="");document.body&&document.body.classList&&document.body.classList.remove("w-commerce-commercecartopen","wf-commerce-cart-open")}catch(t){}}catch(t){console.warn("Cart-Kompatibilitätsprüfung fehlgeschlagen:",t)}finally{c=!1,o=Date.now()}var _}()}};t=setTimeout(s,i)}catch(t){}}async function w(t){try{var e=function(t){for(var e=['[data-wf-cart-action="remove-item"]','[data-wf-cart-action*="remove" i]','[data-node-type="commerce-cart-remove-link"]','[data-node-type*="remove" i]','a[role="button"][aria-label*="remove" i]','button[aria-label*="remove" i]',".w-commerce-commercecartremovebutton",".w-commerce-commercecartremove"],r=0;r<e.length;r++){var a=t.querySelector(e[r]);if(a)return a}try{var c=Array.from(t.querySelectorAll("a,button,div,span")).filter(function(t){var e=(t.textContent||"").trim().toLowerCase();return"entfernen"===e||"remove"===e||e.indexOf("entfernen")>=0||e.indexOf("remove")>=0});if(c.length)return c[0]}catch(t){}return null}(t);if(!e)return;e.click(),await b(1500)}catch(t){console.warn("Cart: Entfernen fehlgeschlagen",t)}}async function I(t,e){try{if(window.solarGrid){try{(window.solarGrid.ensureWebflowFormsMapped||window.solarGrid.generateHiddenCartForms).call(window.solarGrid)}catch(t){}if("function"==typeof window.solarGrid.addSingleItemAndWait)return void await window.solarGrid.addSingleItemAndWait(t,e,!1);if("function"==typeof window.solarGrid.addProductToCart)return window.solarGrid.addProductToCart(t,e,!1),void await b(1500)}}catch(t){}try{var r=document.querySelector(".w-commerce-commercecartcontainerwrapper"),a=!1;try{if(r){var c=window.getComputedStyle(r);a="none"!==c.display&&"hidden"!==c.visibility,r.style.display="none"}}catch(t){}var o=(u()?l[t]||"object"==typeof PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO[t]:s[t]||"object"==typeof PRODUCT_MAP&&PRODUCT_MAP[t])||null,n=null;if(o&&(n=document.querySelector('form[data-node-type="commerce-add-to-cart-form"][data-commerce-product-id="'+o.productId+'"]')||document.querySelector('form[data-node-type="commerce-add-to-cart-form"][data-commerce-sku-id="'+o.variantId+'"]')),!n)for(var d=Array.from(document.querySelectorAll('form[data-node-type="commerce-add-to-cart-form"]')),i=0;i<d.length;i++){var f=d[i];if(y(f.getAttribute("data-commerce-product-id"),f.getAttribute("data-commerce-sku-id"))===t){n=f;break}}if(!n)return void console.warn("[CartCompat] Add-Form für",t,"nicht gefunden.");try{var m=n.querySelector('input[name="commerce-add-to-cart-quantity-input"]');m&&(m.value=e)}catch(t){}try{Array.from(n.querySelectorAll("select[required]")).forEach(function(t){if(!t.value){var e=t.querySelector('option[value]:not([value=""])');e&&(t.value=e.value)}})}catch(t){}var p=n.querySelector('input[data-node-type="commerce-add-to-cart-button"], [data-wf-cart-action="add-item"], [data-wf-cart-action*="add" i], input[type="submit"], button[type="submit"]');if(!p)return void console.warn("[CartCompat] Add-Button nicht gefunden für",t);var v=b(1500);p.click(),await v;try{r&&(r.style.display=a?"":"none"),document.body&&document.body.classList&&document.body.classList.remove("w-commerce-commercecartopen","wf-commerce-cart-open")}catch(t){}}catch(t){console.warn("[CartCompat] Eigenständiger Add-Flow fehlgeschlagen:",t)}}window.CartCompatibility={init:function(){try{f().then(function(){if(window.solarGrid&&(window.solarGrid.generateHiddenCartForms||window.solarGrid.ensureWebflowFormsMapped))try{(window.solarGrid.ensureWebflowFormsMapped||window.solarGrid.generateHiddenCartForms).call(window.solarGrid)}catch(t){}e||m(),function(){try{var t=p();if(t){var e=new MutationObserver(function(){h(500)});try{e.observe(t,{childList:!0,subtree:!0})}catch(t){}}var r=new MutationObserver(function(){h(800)});try{r.observe(document.body,{childList:!0,subtree:!0})}catch(t){}}catch(t){}}(),h(300)})}catch(t){}},schedule:function(t){try{window.solarGrid&&"function"==typeof window.solarGrid.hideCartContainer&&window.solarGrid.hideCartContainer()}catch(t){}h(t)}}}();