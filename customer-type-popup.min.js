!function(){function e(){return"private"===c()}function t(){try{const t=["#gewerbe",'[data-customer-type="gewerbe"]','[data-customer-segment="gewerbe"]','[data-list="gewerbe"]',".collection-list-gewerbe"],r=e=>e.flatMap(e=>Array.from(document.querySelectorAll(e))),a=(e,t)=>e.forEach(e=>{e&&e.style&&(e.style.display=t?"none":"")}),c=r(["#privat",'[data-customer-type="privat"]','[data-customer-segment="privat"]','[data-list="privat"]',".collection-list-privat"]),o=r(t);a(c,!e()),a(o,e())}catch(e){}}function r(){try{const t=document.getElementById("nav-private"),r=document.getElementById("nav-business");t&&t.classList&&t.classList.toggle("stp-btn-active",e()),r&&r.classList&&r.classList.toggle("stp-btn-active",!e());const a=document.querySelector(".customer-type-switch");a&&a.classList&&(a.classList.toggle("is-private",e()),a.classList.toggle("is-business",!e()))}catch(e){}}function a(e){!function(e){try{const t=Date.now()+1728e5;localStorage.setItem("solarTool_customerType",JSON.stringify({type:e,expiresAt:t}))}catch(e){}}("business"===e?"business":"private"),t(),r();try{window.solarGrid&&(window.solarGrid.updateCurrentTotalPrice&&window.solarGrid.updateCurrentTotalPrice(),window.solarGrid.updateOverviewTotalPrice&&window.solarGrid.updateOverviewTotalPrice(),(window.solarGrid.ensureWebflowFormsMapped||window.solarGrid.generateHiddenCartForms)?.call(window.solarGrid))}catch(e){}try{window.CartCompatibility&&"function"==typeof window.CartCompatibility.schedule&&window.CartCompatibility.schedule(150)}catch(e){}}function c(){try{const e=localStorage.getItem("solarTool_customerType");if(!e)return null;const t=JSON.parse(e);return t&&t.type?"number"==typeof t.expiresAt&&Date.now()>t.expiresAt?(localStorage.removeItem("solarTool_customerType"),null):"private"===t.type?"private":"business":null}catch(e){return null}}function o(){const e=document.getElementById("customer-type-overlay");e&&(e.style.display="none",e.setAttribute("aria-hidden","true"))}function d(){const e=document.getElementById("nav-private"),d=document.getElementById("nav-business");e&&e.addEventListener("click",function(){a("private")}),d&&d.addEventListener("click",function(){a("business")});if(document.getElementById("customer-type-overlay")){const e=c(),t=document.getElementById("stp-private"),r=document.getElementById("stp-business");t&&t.addEventListener("click",function(){a("private"),o()}),r&&r.addEventListener("click",function(){a("business"),o()}),e||function(){const e=document.getElementById("customer-type-overlay");e&&(e.style.display="flex",e.setAttribute("aria-hidden","false"))}()}t(),r();try{CartCompatibility.init()}catch(e){}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()}(),function(){var e=null,t=!1,r={productIdToKey:{},variantIdToKey:{}},a=!1,c=!1,o=0,d=2e3,n=0;function i(){try{const e=localStorage.getItem("solarTool_customerType");if(!e)return null;const t=JSON.parse(e);return t&&t.type?"number"==typeof t.expiresAt&&Date.now()>t.expiresAt?(localStorage.removeItem("solarTool_customerType"),null):"private"===t.type?"private":"business":null}catch(e){return null}}function u(){return"business"===i()}const f={Solarmodul:{productId:"68c7ec7571df9723b8ef5050",variantId:"68c7ec7e71df9723b8ef53cd"},UlicaSolarBlackJadeFlow:{productId:"68c7ef7fbeeaadb13262a062",variantId:"68c7ef7ff397fcf9d6d7571e"},SolarmodulPalette:{productId:"68c7ec7471df9723b8ef5008",variantId:"68c7ec7c71df9723b8ef5160"},UlicaSolarBlackJadeFlowPalette:{productId:"68c7ec7471df9723b8ef5006",variantId:"68c7ec7d71df9723b8ef5187"},Quetschkabelschuhe:{productId:"68c7ec7471df9723b8ef502d",variantId:"68c7ec7c71df9723b8ef514b"},Solarkabel:{productId:"68c7ec7471df9723b8ef5031",variantId:"68c7ec7d71df9723b8ef5205"},Erdungsband:{productId:"68c7ec7471df9723b8ef5033",variantId:"68c7ec7c71df9723b8ef5159"},Endkappen:{productId:"68c7ec7471df9723b8ef5041",variantId:"68c7ec7e71df9723b8ef533e"},Mittelklemmen:{productId:"68c7ec7471df9723b8ef5043",variantId:"68c7ec7e71df9723b8ef53e0"},Dachhaken:{productId:"68c7ec7471df9723b8ef5045",variantId:"68c7ec7f71df9723b8ef54f9"},Schiene_360_cm:{productId:"68c7ec7471df9723b8ef5047",variantId:"68c7ec7e71df9723b8ef53d6"},Schienenverbinder:{productId:"68c7ec7471df9723b8ef5049",variantId:"68c7ec7e71df9723b8ef533b"},Schiene_240_cm:{productId:"68c7ec7471df9723b8ef504b",variantId:"68c7ec7e71df9723b8ef5387"},MC4_Stecker:{productId:"68c7ec7671df9723b8ef506e",variantId:"68c7ec7d71df9723b8ef5230"},Tellerkopfschraube:{productId:"68c7ec7671df9723b8ef5072",variantId:"68c7ec7f71df9723b8ef544a"},Schrauben:{productId:"68c7ec7771df9723b8ef5085",variantId:"68c7ec7f71df9723b8ef5406"},Endklemmen:{productId:"68c7ec7771df9723b8ef5087",variantId:"68c7ec7f71df9723b8ef542a"},Holzunterleger:{productId:"68c7f04a8fd58d9f974d6eb6",variantId:"68c7f04bb950895d194203e00"},HuaweiOpti:{productId:"68c7ec7471df9723b8ef501e",variantId:"68c7ec7e71df9723b8ef5335"},BRCOpti:{productId:"68c7ec7471df9723b8ef501a",variantId:"68c7ec7b71df9723b8ef510b"}},l={Solarmodul:{productId:"685003af0e41d945fb0198d8",variantId:"685003af4a8e88cb58c89d46"},UlicaSolarBlackJadeFlow:{productId:"689455ed543f0cbb26ba54e9",variantId:"689455ed7d7ddfd326d5dbf9"},SolarmodulPalette:{productId:"68b999a74abecff30536dee0",variantId:"68b999a873f9b0df7954ed8b"},UlicaSolarBlackJadeFlowPalette:{productId:"68b99932fb8af7a115bb2680",variantId:"68b999339e25d980ba33928d"},Endklemmen:{productId:"6853c34fe99f6e3d878db38b",variantId:"6853c350edab8f13fc18c1b9"},Schrauben:{productId:"6853c2782b14f4486dd26f52",variantId:"6853c2798bf6755ddde26a8e"},Dachhaken:{productId:"6853c1d0f350bf620389664c",variantId:"6853c1d04d7c01769211b8d6"},Mittelklemmen:{productId:"68531088654d1468dca962c",variantId:"6853c1084c04541622ba3e26"},Endkappen:{productId:"6853be0895a5a578324f9682",variantId:"6853be0805e96b5a16c705cd"},Schienenverbinder:{productId:"6853c2018bf6755ddde216a8",variantId:"6853c202c488ee61eb51a3dc"},Schiene_240_cm:{productId:"6853bd882f00db0c9a42d653",variantId:"6853bd88c4173dbe72bab10f"},Schiene_360_cm:{productId:"6853bc8f3f6abf360c605142",variantId:"6853bc902f00db0c9a423d97"},MC4_Stecker:{productId:"687fcc9f66078f7098826ccc",variantId:"687fcca02c6537b9a9493fa7"},Solarkabel:{productId:"687fd60dc599f5e95d783f99",variantId:"687fd60dd3a8ae1f00a6d6d1"},Holzunterleger:{productId:"688780821dbbf26153a85117",variantId:"688780ad795c82663cd6e69b"},Erdungsklemme:{productId:"6887e8aaa6ca43c15254d224",variantId:"6887e8abb439562cbc88db5d"},Quetschkabelschuhe:{productId:"68876153200e1a5e28a1b709",variantId:"6887615388988b2ccda11067"},Erdungsband:{productId:"688760e01c9c7973ee287386",variantId:"688760e0835845affc493354"},Tellerkopfschraube:{productId:"688760a7124e867cf2b20051",variantId:"688760a7f246d23f70575fb1"},HuaweiOpti:{productId:"68af2934de0a7fe5d316efbc",variantId:"68af2934c230bc1eaa972585"},BRCOpti:{productId:"68b1e02629cec71ebfc12f0e",variantId:"68b1e02ca05a6b4aca721dc8"}};function s(){return new Promise(function(e){try{if(a)return e(!0);!function(){try{window.PRODUCT_MAP=window.PRODUCT_MAP||l,window.PRODUCT_MAP_BRUTTO=window.PRODUCT_MAP_BRUTTO||f}catch(e){}}(),a=!0,e(!0)}catch(t){a=!0,e(!0)}})}function m(){try{if(Object.keys(l||{}).forEach(function(e){var t=l[e];t&&t.productId&&(r.productIdToKey[t.productId]=e),t&&t.variantId&&(r.variantIdToKey[t.variantId]=e)}),Object.keys(f||{}).forEach(function(e){var t=f[e];t&&t.productId&&(r.productIdToKey[t.productId]=e),t&&t.variantId&&(r.variantIdToKey[t.variantId]=e)}),"object"==typeof PRODUCT_MAP&&PRODUCT_MAP&&Object.keys(PRODUCT_MAP).forEach(function(e){var t=PRODUCT_MAP[e];t&&t.productId&&(r.productIdToKey[t.productId]=e),t&&t.variantId&&(r.variantIdToKey[t.variantId]=e)}),"object"==typeof PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO&&Object.keys(PRODUCT_MAP_BRUTTO).forEach(function(e){var t=PRODUCT_MAP_BRUTTO[e];t&&t.productId&&(r.productIdToKey[t.productId]=e),t&&t.variantId&&(r.variantIdToKey[t.variantId]=e)}),window.solarGrid&&"object"==typeof window.solarGrid){try{var e=window.solarGrid.webflowFormMap||{};Object.keys(e||{}).forEach(function(t){var a=e[t];if(a){var c=a.getAttribute("data-commerce-product-id"),o=a.getAttribute("data-commerce-sku-id");c&&(r.productIdToKey[c]=t),o&&(r.variantIdToKey[o]=t)}})}catch(e){}try{var a=window.solarGrid.webflowFormMapBrutto||{};Object.keys(a||{}).forEach(function(e){var t=a[e];if(t){var c=t.getAttribute("data-commerce-product-id"),o=t.getAttribute("data-commerce-sku-id");c&&(r.productIdToKey[c]=e),o&&(r.variantIdToKey[o]=e)}})}catch(e){}}try{Array.from(document.querySelectorAll('form[data-node-type="commerce-add-to-cart-form"]')).forEach(function(e){var t=e.getAttribute("data-commerce-product-id"),a=e.getAttribute("data-commerce-sku-id");if(t&&!r.productIdToKey[t]){var c=null;Object.keys(l||{}).some(function(e){var r=l[e];return!(!r||r.productId!==t)&&(c=e,!0)}),c||Object.keys(f||{}).some(function(e){var r=f[e];return!(!r||r.productId!==t)&&(c=e,!0)}),c||"object"!=typeof PRODUCT_MAP||Object.keys(PRODUCT_MAP).some(function(e){var r=PRODUCT_MAP[e];return!(!r||r.productId!==t)&&(c=e,!0)}),c||"object"!=typeof PRODUCT_MAP_BRUTTO||Object.keys(PRODUCT_MAP_BRUTTO).some(function(e){var r=PRODUCT_MAP_BRUTTO[e];return!(!r||r.productId!==t)&&(c=e,!0)}),c&&(r.productIdToKey[t]=c)}if(a&&!r.variantIdToKey[a]){var o=null;Object.keys(l||{}).some(function(e){var t=l[e];return!(!t||t.variantId!==a)&&(o=e,!0)}),o||Object.keys(f||{}).some(function(e){var t=f[e];return!(!t||t.variantId!==a)&&(o=e,!0)}),o||"object"!=typeof PRODUCT_MAP||Object.keys(PRODUCT_MAP).some(function(e){var t=PRODUCT_MAP[e];return!(!t||t.variantId!==a)&&(o=e,!0)}),o||"object"!=typeof PRODUCT_MAP_BRUTTO||Object.keys(PRODUCT_MAP_BRUTTO).some(function(e){var t=PRODUCT_MAP_BRUTTO[e];return!(!t||t.variantId!==a)&&(o=e,!0)}),o&&(r.variantIdToKey[a]=o)}})}catch(e){}t=!0}catch(e){}}function p(e,a){return t||m(),a&&r.variantIdToKey[a]?r.variantIdToKey[a]:e&&r.productIdToKey[e]?r.productIdToKey[e]:null}function b(e){try{var t=e.querySelector("[data-commerce-sku-id], [data-commerce-product-id]")||e;return{productId:t.getAttribute("data-commerce-product-id")||"",variantId:t.getAttribute("data-commerce-sku-id")||""}}catch(e){return{productId:"",variantId:""}}}function y(e){try{var t=e.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]'),r=t?parseInt(t.value,10):NaN;if(isFinite(r)&&r>0)return r;for(var a=[".w-commerce-commercecartquantity",'[data-node-type*="quantity" i]','[data-wf-bindings*="quantity" i]'],c=0;c<a.length;c++){var o=e.querySelector(a[c]);if(o){var d=(o.textContent||"").trim().match(/\d+/);if(d&&(r=parseInt(d[0],10),isFinite(r)&&r>0))return r}}return 1}catch(e){return 1}}function v(){return document.querySelector(".w-commerce-commercecartlist")||document.querySelector(".w-commerce-commercecartcontainerwrapper")}function w(e){return new Promise(function(t){var r=!1,a=v(),c=setTimeout(function(){r||(r=!0,t())},e||1500);if(a){var o=new MutationObserver(function(){r||(r=!0,clearTimeout(c),t());try{o.disconnect()}catch(e){}});try{o.observe(a,{childList:!0,subtree:!0})}catch(e){}}})}function I(r){try{e&&clearTimeout(e);var a=++n,i=Math.max(0,r||250),l=function(){if(!(a<n))if(c)e=setTimeout(l,200);else{var r=Date.now(),i=Math.max(0,2e3-(r-o));i>0?e=setTimeout(l,i):async function(){try{if(c)return;if(Date.now()-o<d)return;if(document.hidden)return;try{if(window.solarGrid&&window.solarGrid.isAddingToCart)return}catch(e){}try{var e=document.querySelector(".w-commerce-commercecartcontainerwrapper");if(e){var r=window.getComputedStyle(e),a=document.body&&document.body.classList&&(document.body.classList.contains("w-commerce-commercecartopen")||document.body.classList.contains("wf-commerce-cart-open")),n=e.querySelector('[role="dialog"], .w-commerce-commercecartcontainer'),i=!!n&&("none"!==(_=window.getComputedStyle(n)).display&&"hidden"!==_.visibility);if("none"!==r.display&&"hidden"!==r.visibility&&(a||i))return}}catch(e){}c=!0;var l=v();if(!l)return;var s=Array.from(l.querySelectorAll('.w-commerce-commercecartitem, [data-node-type="commerce-cart-item"]'));if(!s.length)return;t||m();try{window.solarGrid&&"function"==typeof window.solarGrid.hideCartContainer&&window.solarGrid.hideCartContainer()}catch(e){}for(var w=0;w<s.length;w++){var I=s[w],g=b(I),C=p(g.productId,g.variantId);if(C){var O=u(),P=!1;try{P=Object.keys(f||{}).some(function(e){var t=f[e];return t&&(t.productId===g.productId||t.variantId===g.variantId)})}catch(e){}if(O!==P){var A=y(I);await h(I),await T(C,A),await new Promise(function(e){setTimeout(e,120)})}}else console.warn("[CartCompat] Unbekanntes Produkt im Warenkorb; wird ignoriert.")}try{var S=document.querySelector(".w-commerce-commercecartcontainerwrapper");if(S)"none"===window.getComputedStyle(S).display||(S.style.display="");document.body&&document.body.classList&&document.body.classList.remove("w-commerce-commercecartopen","wf-commerce-cart-open")}catch(e){}}catch(e){console.warn("Cart-Kompatibilitätsprüfung fehlgeschlagen:",e)}finally{c=!1,o=Date.now()}var _}()}};e=setTimeout(l,i)}catch(e){}}async function h(e){try{var t=function(e){for(var t=['[data-wf-cart-action="remove-item"]','[data-wf-cart-action*="remove" i]','[data-node-type="commerce-cart-remove-link"]','[data-node-type*="remove" i]','a[role="button"][aria-label*="remove" i]','button[aria-label*="remove" i]',".w-commerce-commercecartremovebutton",".w-commerce-commercecartremove"],r=0;r<t.length;r++){var a=e.querySelector(t[r]);if(a)return a}try{var c=Array.from(e.querySelectorAll("a,button,div,span")).filter(function(e){var t=(e.textContent||"").trim().toLowerCase();return"entfernen"===t||"remove"===t||t.indexOf("entfernen")>=0||t.indexOf("remove")>=0});if(c.length)return c[0]}catch(e){}return null}(e);if(!t)return;t.click(),await w(1500)}catch(e){console.warn("Cart: Entfernen fehlgeschlagen",e)}}async function T(e,t){try{if(window.solarGrid){try{(window.solarGrid.ensureWebflowFormsMapped||window.solarGrid.generateHiddenCartForms).call(window.solarGrid)}catch(e){}if("function"==typeof window.solarGrid.addSingleItemAndWait)return void await window.solarGrid.addSingleItemAndWait(e,t,!1);if("function"==typeof window.solarGrid.addProductToCart)return window.solarGrid.addProductToCart(e,t,!1),void await w(1500)}}catch(e){}try{var r=document.querySelector(".w-commerce-commercecartcontainerwrapper"),a=!1;try{if(r){var c=window.getComputedStyle(r);a="none"!==c.display&&"hidden"!==c.visibility,r.style.display="none"}}catch(e){}var o=(u()?f[e]||"object"==typeof PRODUCT_MAP_BRUTTO&&PRODUCT_MAP_BRUTTO[e]:l[e]||"object"==typeof PRODUCT_MAP&&PRODUCT_MAP[e])||null,d=null;if(o&&(d=document.querySelector('form[data-node-type="commerce-add-to-cart-form"][data-commerce-product-id="'+o.productId+'"]')||document.querySelector('form[data-node-type="commerce-add-to-cart-form"][data-commerce-sku-id="'+o.variantId+'"]')),!d)for(var n=Array.from(document.querySelectorAll('form[data-node-type="commerce-add-to-cart-form"]')),i=0;i<n.length;i++){var s=n[i];if(p(s.getAttribute("data-commerce-product-id"),s.getAttribute("data-commerce-sku-id"))===e){d=s;break}}if(!d)return void console.warn("[CartCompat] Add-Form für",e,"nicht gefunden.");try{var m=d.querySelector('input[name="commerce-add-to-cart-quantity-input"]');m&&(m.value=t)}catch(e){}try{Array.from(d.querySelectorAll("select[required]")).forEach(function(e){if(!e.value){var t=e.querySelector('option[value]:not([value=""])');t&&(e.value=t.value)}})}catch(e){}var b=d.querySelector('input[data-node-type="commerce-add-to-cart-button"], [data-wf-cart-action="add-item"], [data-wf-cart-action*="add" i], input[type="submit"], button[type="submit"]');if(!b)return void console.warn("[CartCompat] Add-Button nicht gefunden für",e);var y=w(1500);b.click(),await y;try{r&&(r.style.display=a?"":"none"),document.body&&document.body.classList&&document.body.classList.remove("w-commerce-commercecartopen","wf-commerce-cart-open")}catch(e){}}catch(e){console.warn("[CartCompat] Eigenständiger Add-Flow fehlgeschlagen:",e)}}window.CartCompatibility={init:function(){try{s().then(function(){if(window.solarGrid&&(window.solarGrid.generateHiddenCartForms||window.solarGrid.ensureWebflowFormsMapped))try{(window.solarGrid.ensureWebflowFormsMapped||window.solarGrid.generateHiddenCartForms).call(window.solarGrid)}catch(e){}t||m(),function(){try{var e=v();if(e){var t=new MutationObserver(function(){I(500)});try{t.observe(e,{childList:!0,subtree:!0})}catch(e){}}var r=new MutationObserver(function(){I(800)});try{r.observe(document.body,{childList:!0,subtree:!0})}catch(e){}}catch(e){}}(),I(300)})}catch(e){}},schedule:function(e){try{window.solarGrid&&"function"==typeof window.solarGrid.hideCartContainer&&window.solarGrid.hideCartContainer()}catch(e){}I(e)}}}();