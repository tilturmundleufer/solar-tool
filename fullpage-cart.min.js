!function(){function t(t){try{return(t||0).toFixed(2).replace(".",",")+" €"}catch(t){return"0,00 €"}}function e(){try{return!function(){try{return"business"===(localStorage.getItem("solarTool_customerType")&&JSON.parse(localStorage.getItem("solarTool_customerType")).type)}catch(t){return!1}}()}catch(t){return!0}}var n={productIdToKey:{},variantIdToKey:{}};function r(t,e){return e&&n.variantIdToKey[e]||t&&n.productIdToKey[t]||null}function a(){return document.querySelector(".w-commerce-commercecartlist")||document.querySelector(".w-commerce-commercecartcontainerwrapper")}function c(){var t=a();return t?Array.from(t.querySelectorAll('.w-commerce-commercecartitem, [data-node-type="commerce-cart-item"]')).map(function(t){var e=t.getAttribute("data-commerce-product-id")||"",n=t.getAttribute("data-commerce-sku-id")||"";if(!e){var a=t.querySelector("[data-commerce-product-id]");a&&(e=a.getAttribute("data-commerce-product-id")||"")}if(!n){var c=t.querySelector("[data-commerce-sku-id]");if(c&&(n=c.getAttribute("data-commerce-sku-id")||""),!n){var o=t.querySelector('[data-wf-cart-action="remove-item"]');o&&(n=o.getAttribute("data-commerce-sku-id")||"")}}var i=t.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]'),u=1;try{var d=parseInt(i&&i.value,10);u=isFinite(d)&&d>0?d:1}catch(t){}for(var m="",l=[".w-commerce-commercecartproductname",'[data-node-type*="product" i]',".text-block-18",".text-block-5","h1,h2,h3,h4,div,span"],p=0;p<l.length;p++){var v=t.querySelector(l[p]);if(v&&(v.textContent||"").trim()){m=(v.textContent||"").trim();break}}var y="",s=t.querySelector("img");return s&&(y=s.getAttribute("src")||s.getAttribute("data-src")||""),{el:t,productId:e,variantId:n,quantity:u,name:m,img:y,key:r(e,n)}}):[]}function o(t,e){return document.querySelector('form[data-node-type="commerce-add-to-cart-form"][data-commerce-product-id="'+t+'"]')||document.querySelector('form[data-node-type="commerce-add-to-cart-form"][data-commerce-sku-id="'+e+'"]')}function i(t){return new Promise(function(e){var n=!1,r=a(),c=setTimeout(function(){n||(n=!0,e())},t||1500);if(r){var o=new MutationObserver(function(){if(!n){n=!0,clearTimeout(c);try{o.disconnect()}catch(t){}e()}});try{o.observe(r,{childList:!0,subtree:!0})}catch(t){}}})}function u(t,e){try{var n=t.querySelector('input[name="commerce-add-to-cart-quantity-input"]');n&&(n.value=e)}catch(t){}try{t.querySelectorAll("select[required]").forEach(function(t){if(!t.value){var e=t.querySelector('option[value]:not([value=""])');e&&(t.value=e.value)}})}catch(t){}var r=t.querySelector('input[data-node-type="commerce-add-to-cart-button"], [data-wf-cart-action="add-item"], [data-wf-cart-action*="add" i], input[type="submit"], button[type="submit"]');r&&r.click()}async function d(t,e){if(0!==e){if(e>0){var n=o(t.productId,t.variantId);if(!n)return;var r=i(1500);return u(n,e),void await r}var a=t.el.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]');if(a){var c=parseInt(a.value,10)||1,d=Math.max(0,c+e);a.value=d;try{a.dispatchEvent(new Event("change",{bubbles:!0}))}catch(t){}await i(1500)}else{var l=m(t.el);if(l&&(l.click(),await i(1500),t.quantity+e>0)){var p=o(t.productId,t.variantId);if(p){var v=i(1500);u(p,t.quantity+e),await v}}}}}function m(t){for(var e=['[data-wf-cart-action="remove-item"]','[data-wf-cart-action*="remove" i]','[data-node-type="commerce-cart-remove-link"]','[data-node-type*="remove" i]','a[role="button"][aria-label*="remove" i]','button[aria-label*="remove" i]',".w-commerce-commercecartremovebutton",".w-commerce-commercecartremove"],n=0;n<e.length;n++){var r=t.querySelector(e[n]);if(r)return r}try{var a=Array.from(t.querySelectorAll("a,button,div,span")).filter(function(t){var e=(t.textContent||"").trim().toLowerCase();return"entfernen"===e||"remove"===e||e.indexOf("entfernen")>=0||e.indexOf("remove")>=0});if(a.length)return a[0]}catch(t){}return null}function l(t){var e=(t||"").toString().trim();e=e.replace(/\u00a0/g," ").replace(/[^0-9,\.]/g,""),/,\d{2}$/.test(e)&&(e=e.replace(/\./g,"").replace(",","."));var n=parseFloat(e);return isFinite(n)?n:0}function p(){var n=c(),a=document.getElementById("fp-cart-items");a&&(a.innerHTML="",n.length||(a.innerHTML='<div class="fp-empty">Ihr Warenkorb ist leer.</div>'),n.forEach(function(e){var n=document.createElement("div");n.className="fp-cart-item";var c=document.createElement("img");c.src=e.img||"",c.alt=e.name||"";var o=document.createElement("div"),u=document.createElement("div");u.className="title",u.textContent=e.name||"Produkt";var p=document.createElement("div");p.className="meta";try{var v=e.key||r(e.productId,e.variantId)||"",y=window.VE||window.VE_VALUES;y&&v&&y[v]?p.textContent="VE: "+y[v]:p.textContent=""}catch(t){p.textContent=""}o.appendChild(u),o.appendChild(p);var s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.gap="12px";var f=document.createElement("div");f.className="qty";var h=document.createElement("button");h.className="btn outline",h.style.width="36px",h.textContent="−";var b=document.createElement("input");b.type="number",b.min="0",b.value=String(e.quantity);var w=document.createElement("button");w.className="btn outline",w.style.width="36px",w.textContent="+";var g=e.el.querySelector('.w-commerce-commercecartitemprice, [data-node-type*="price" i], .text-block-5'),C=l(g?g.textContent:"0")*(e.quantity||1),k=document.createElement("div");k.className="item-price",k.textContent=t(C);var E=document.createElement("button");E.className="btn outline",E.textContent="Entfernen",f.appendChild(h),f.appendChild(b),f.appendChild(w),s.appendChild(f),s.appendChild(k),s.appendChild(E),n.appendChild(c),n.appendChild(o),n.appendChild(s),h.addEventListener("click",async function(){var t=parseInt(b.value,10)||0,n=Math.max(0,t-1);b.value=String(n),await d(e,n-t)}),w.addEventListener("click",async function(){var t=parseInt(b.value,10)||0,n=t+1;b.value=String(n),await d(e,n-t)}),b.addEventListener("change",async function(){var t=parseInt(b.value,10);if(!isFinite(t)||t<0)b.value=String(e.quantity);else{var n=t-e.quantity;0!==n&&await d(e,n)}}),E.addEventListener("click",async function(){var t=m(e.el);t&&(t.click(),await i(1500))}),a.appendChild(n)}));var o=function(t){var e=document.querySelector('.w-commerce-commercecartordervalue, [data-node-type*="ordervalue" i]'),n=0;if(e&&(n=l(e.textContent||"")),n>0)return{subtotal:n,reliable:!0};var r=0,a=!1;return t.forEach(function(t){var e=t.el.querySelector('.w-commerce-commercecartitemprice, [data-node-type*="price" i], .text-block-5');if(e){var n=l(e.textContent||"");n>0&&(r+=n,a=!0)}}),{subtotal:r,reliable:a}}(n);!function(n){var r=n||0,a=document.getElementById("fp-summary-note"),c=document.getElementById("fp-vat-line");if(e()){try{document.getElementById("fp-subtotal").textContent=t(r)}catch(t){}a&&(a.textContent="Bei den angebeben Preisen handelt es sich um Nettobeträge. Privatkunden profitieren von 0% MwSt Gemäß §12 Abs. 3 UstG"),c&&(c.textContent="")}else{var o=.19*r,i=r+o;try{document.getElementById("fp-subtotal").textContent=t(r)}catch(t){}a&&(a.textContent="Firmenkunden wird die MwSt im Bestellprozess berechnet."),c&&(c.textContent="zzgl. 19% MwSt: "+t(o)+" • Brutto: "+t(i))}}(o.subtotal),function(){try{var t=document.getElementById("fp-checkout-slot");if(t){t.innerHTML="";var e=document.createElement("button");e.className="btn primary",e.textContent="Weiter zur Kasse",e.addEventListener("click",function(){y()}),t.appendChild(e)}}catch(t){}try{var n=document.getElementById("fp-quick-slot");if(n){n.innerHTML="";var r=document.createElement("button");r.className="btn outline",r.textContent="Pay with browser.",r.addEventListener("click",function(){try{var t=document.querySelector('[data-node-type="commerce-cart-quick-checkout-button"], .w-commerce-commercecartquickcheckoutbutton');t&&t.click()}catch(t){}}),n.appendChild(r)}}catch(t){}try{var a=document.getElementById("fp-paypal-slot");if(a){a.innerHTML="";var c=document.createElement("button");c.className="btn primary",c.textContent="Pay with PayPal",c.addEventListener("click",function(){try{var t=document.querySelector("[data-wf-paypal-button] iframe.component-frame, .paypal-buttons iframe.component-frame");if(t&&t.contentWindow)return void t.contentWindow.postMessage({event:"click"},"*");var e=document.querySelector('[data-wf-paypal-button] button, .paypal-buttons button, [data-node-type="commerce-cart-quick-checkout-actions"] button');e&&e.click()}catch(t){}}),a.appendChild(c)}}catch(t){}}()}function v(){!function(){try{[window.PRODUCT_MAP||window.POPUP_PRODUCT_MAP_NETTO||{},window.PRODUCT_MAP_BRUTTO||window.POPUP_PRODUCT_MAP_BRUTTO||{}].forEach(function(t){Object.keys(t||{}).forEach(function(e){var r=t[e];r&&(r.productId&&(n.productIdToKey[r.productId]=e),r.variantId&&(n.variantIdToKey[r.variantId]=e))})})}catch(t){}}();var t=document.getElementById("fp-cart-notice");t&&(t.textContent="Preise netto angezeigt; Kundentyp-Steuerung aktiv.");var e=document.getElementById("fp-clear-all");e&&e.addEventListener("click",async function(){for(var t=0;;){var e=c();if(!e.length||t++>50)break;var n=m(e[0].el);if(!n)break;n.click(),await i(1500)}});var r=document.getElementById("fp-checkout");r&&r.addEventListener("click",function(){y()});var o=a();if(o)try{new MutationObserver(function(){p()}).observe(o,{childList:!0,subtree:!0})}catch(t){}try{window.CartCompatibility&&"function"==typeof window.CartCompatibility.schedule&&window.CartCompatibility.schedule(200)}catch(t){}p()}function y(){for(var t=['[data-node-type*="checkout" i]',".w-commerce-commercecartcheckoutbutton",'a[href*="checkout" i]'],e=0;e<t.length;e++){var n=document.querySelector(t[e]);if(n)try{return void n.click()}catch(t){}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",v):v()}();