!function(){function e(e){try{return(e||0).toFixed(2).replace(".",",")+" €"}catch(e){return"0,00 €"}}function t(){try{return!function(){try{return"business"===(localStorage.getItem("solarTool_customerType")&&JSON.parse(localStorage.getItem("solarTool_customerType")).type)}catch(e){return!1}}()}catch(e){return!0}}var r={productIdToKey:{},variantIdToKey:{}};function n(e,t){return t&&r.variantIdToKey[t]||e&&r.productIdToKey[e]||null}function a(){return document.querySelector(".w-commerce-commercecartlist")||document.querySelector(".w-commerce-commercecartcontainerwrapper")}function c(){var e=a();return e?Array.from(e.querySelectorAll('.w-commerce-commercecartitem, [data-node-type="commerce-cart-item"]')).map(function(e){var t=e.getAttribute("data-commerce-product-id")||"",r=e.getAttribute("data-commerce-sku-id")||"";if(!t){var a=e.querySelector("[data-commerce-product-id]");a&&(t=a.getAttribute("data-commerce-product-id")||"")}if(!r){var c=e.querySelector("[data-commerce-sku-id]");if(c&&(r=c.getAttribute("data-commerce-sku-id")||""),!r){var o=e.querySelector('[data-wf-cart-action="remove-item"]');o&&(r=o.getAttribute("data-commerce-sku-id")||"")}}var i=e.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]'),d=1;try{var u=parseInt(i&&i.value,10);d=isFinite(u)&&u>0?u:1}catch(e){}for(var l="",m=[".w-commerce-commercecartproductname",'[data-node-type*="product" i]',".text-block-18",".text-block-5","h1,h2,h3,h4,div,span"],p=0;p<m.length;p++){var s=e.querySelector(m[p]);if(s&&(s.textContent||"").trim()){l=(s.textContent||"").trim();break}}var y="",v=e.querySelector("img");return v&&(y=v.getAttribute("src")||v.getAttribute("data-src")||""),{el:e,productId:t,variantId:r,quantity:d,name:l,img:y,key:n(t,r)}}):[]}function o(e,t){return document.querySelector('form[data-node-type="commerce-add-to-cart-form"][data-commerce-product-id="'+e+'"]')||document.querySelector('form[data-node-type="commerce-add-to-cart-form"][data-commerce-sku-id="'+t+'"]')}function i(e){return new Promise(function(t){var r=!1,n=a(),c=setTimeout(function(){r||(r=!0,t())},e||1500);if(n){var o=new MutationObserver(function(){if(!r){r=!0,clearTimeout(c);try{o.disconnect()}catch(e){}t()}});try{o.observe(n,{childList:!0,subtree:!0})}catch(e){}}})}function d(e,t){try{var r=e.querySelector('input[name="commerce-add-to-cart-quantity-input"]');r&&(r.value=t)}catch(e){}try{e.querySelectorAll("select[required]").forEach(function(e){if(!e.value){var t=e.querySelector('option[value]:not([value=""])');t&&(e.value=t.value)}})}catch(e){}var n=e.querySelector('input[data-node-type="commerce-add-to-cart-button"], [data-wf-cart-action="add-item"], [data-wf-cart-action*="add" i], input[type="submit"], button[type="submit"]');n&&n.click()}function u(e){for(var t=['[data-wf-cart-action="remove-item"]','[data-wf-cart-action*="remove" i]','[data-node-type="commerce-cart-remove-link"]','[data-node-type*="remove" i]','a[role="button"][aria-label*="remove" i]','button[aria-label*="remove" i]',".w-commerce-commercecartremovebutton",".w-commerce-commercecartremove"],r=0;r<t.length;r++){var n=e.querySelector(t[r]);if(n)return n}try{var a=Array.from(e.querySelectorAll("a,button,div,span")).filter(function(e){var t=(e.textContent||"").trim().toLowerCase();return"entfernen"===t||"remove"===t||t.indexOf("entfernen")>=0||t.indexOf("remove")>=0});if(a.length)return a[0]}catch(e){}return null}function l(e){var t=(e||"").toString().trim();t=t.replace(/\u00a0/g," ").replace(/[^0-9,\.]/g,""),/,\d{2}$/.test(t)&&(t=t.replace(/\./g,"").replace(",","."));var r=parseFloat(t);return isFinite(r)?r:0}function m(){var r=c(),a=document.getElementById("fp-cart-items");if(a){if(a.innerHTML="",r.length)try{var m=document.getElementById("fp-payments-box");m&&(m.style.display="block")}catch(e){}else{a.innerHTML='<div class="fp-empty">Ihr Warenkorb ist leer.</div>';try{var p=document.getElementById("fp-payments-box");p&&(p.style.display="none")}catch(e){}}r.forEach(function(t){var r=document.createElement("div");r.className="fp-cart-item";var c=document.createElement("img");c.src=t.img||"",c.alt=t.name||"";var m=document.createElement("div"),p=document.createElement("div");p.className="title",p.textContent=t.name||"Produkt";var s=document.createElement("div");s.className="meta";try{var y=t.key||n(t.productId,t.variantId)||"",v=window.VE||window.VE_VALUES;v&&y&&v[y]?s.textContent="VE: "+v[y]:s.textContent=""}catch(e){s.textContent=""}m.appendChild(p),m.appendChild(s);var f=document.createElement("div");f.className="fp-right-cell",f.style.display="flex",f.style.alignItems="center",f.style.gap="12px";var h=document.createElement("div");h.className="qty";var b=document.createElement("button");b.className="btn outline",b.style.width="36px",b.textContent="−";var w=document.createElement("input");w.type="number",w.min="0",w.value=String(t.quantity);var g=document.createElement("button");g.className="btn outline",g.style.width="36px",g.textContent="+";var E=t.el.querySelector('.w-commerce-commercecartitemprice, [data-node-type*="price" i], .text-block-5'),C=l(E?E.textContent:"0")*(t.quantity||1),k=document.createElement("div");k.className="item-price",k.textContent=e(C);var q=document.createElement("button");function x(e){try{var r=t.el.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]');r&&(r.value=e,r.dispatchEvent(new Event("change",{bubbles:!0})))}catch(e){}}q.className="btn outline remove-btn",q.textContent="Entfernen",h.appendChild(b),h.appendChild(w),h.appendChild(g),f.appendChild(h),f.appendChild(k),f.appendChild(q),r.appendChild(c),r.appendChild(m),r.appendChild(f),b.addEventListener("click",async function(){var e=parseInt(w.value,10)||0,t=Math.max(0,e-1);w.value=String(t),x(t),await i(1500)}),g.addEventListener("click",async function(){var e=(parseInt(w.value,10)||0)+1;w.value=String(e),x(e),await i(1500)}),w.addEventListener("change",async function(){var e=parseInt(w.value,10);if(!isFinite(e)||e<0)w.value=String(t.quantity);else{var r=e-t.quantity;0!==r&&await async function(e,t){if(0!==t){if(t>0){var r=o(e.productId,e.variantId);if(!r)return;var n=i(1500);return d(r,t),void await n}var a=e.el.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]');if(a){var c=parseInt(a.value,10)||1,l=Math.max(0,c+t);a.value=l;try{a.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){}await i(1500)}else{var m=u(e.el);if(m&&(m.click(),await i(1500),e.quantity+t>0)){var p=o(e.productId,e.variantId);if(p){var s=i(1500);d(p,e.quantity+t),await s}}}}}(t,r)}}),q.addEventListener("click",async function(){var e=u(t.el);e&&(e.click(),await i(1500))}),a.appendChild(r)})}var y=function(e){var t=document.querySelector('.w-commerce-commercecartordervalue, [data-node-type*="ordervalue" i]'),r=0;if(t&&(r=l(t.textContent||"")),r>0)return{subtotal:r,reliable:!0};var n=0,a=!1;return e.forEach(function(e){var t=e.el.querySelector('.w-commerce-commercecartitemprice, [data-node-type*="price" i], .text-block-5');if(t){var r=l(t.textContent||"");r>0&&(n+=r,a=!0)}}),{subtotal:n,reliable:a}}(r);!function(r){var n=r||0,a=document.getElementById("fp-summary-note"),c=document.getElementById("fp-vat-line");if(t()){try{document.getElementById("fp-subtotal").textContent=e(n)}catch(e){}a&&(a.textContent="Bei den angebeben Preisen handelt es sich um Nettobeträge. Privatkunden profitieren von 0% MwSt Gemäß §12 Abs. 3 UstG"),c&&(c.textContent="")}else{var o=.19*n,i=n+o;try{document.getElementById("fp-subtotal").textContent=e(n)}catch(e){}a&&(a.textContent="Firmenkunden wird die MwSt im Bestellprozess berechnet."),c&&(c.textContent="zzgl. 19% MwSt: "+e(o)+" • Brutto: "+e(i))}}(y.subtotal),function(){try{var e=document.getElementById("fp-checkout-slot");if(e){e.innerHTML="";var t=document.createElement("button");t.className="btn primary",t.textContent="Weiter zur Kasse",t.addEventListener("click",function(){s()}),e.appendChild(t)}}catch(e){}try{var r=document.getElementById("fp-quick-slot");if(r){r.innerHTML="";var n=document.createElement("button");n.className="btn pay-dark";var a=document.createElement("span");a.className="pay-icon";var c=(navigator.userAgent||"").toLowerCase(),o="Pay with browser.";/safari/.test(c)&&!/chrome|android/.test(c)?(o="Pay with Apple Pay",a.innerHTML="",a.style.fontFamily="-apple-system",a.style.fontSize="18px"):/android|chrome|crios/.test(c)?(o="Pay with Google Pay",a.innerHTML="",a.style.background="url(https://www.gstatic.com/instantbuy/svg/dark_gpay.svg) no-repeat center/contain"):a.style.background="url(https://www.gstatic.com/instantbuy/svg/dark_gpay.svg) no-repeat center/contain",n.appendChild(a);var i=document.createElement("span");i.textContent=o,n.appendChild(i),n.addEventListener("click",function(){try{var e=document.querySelector('[data-node-type="commerce-cart-quick-checkout-button"], .w-commerce-commercecartquickcheckoutbutton');e&&e.click()}catch(e){}}),r.appendChild(n)}}catch(e){}try{var d=document.getElementById("fp-paypal-slot");d&&(d.innerHTML="",function e(t){try{var r=document.querySelector("[data-wf-paypal-button]"),n=r&&r.querySelector('div[id^="zoid_paypal_buttons"]');if(n){if(!n.__fp_placeholder){var a=document.createElement("div");a.style.height=(n.offsetHeight||200)+"px",a.style.width="100%",n.parentNode.insertBefore(a,n),n.__fp_placeholder=a}var c=document.getElementById("fp-pp-overlay");c||((c=document.createElement("div")).id="fp-pp-overlay",document.body.appendChild(c)),c.style.position="fixed",c.style.zIndex="2147483000",c.style.pointerEvents="auto",n.parentNode!==c&&c.appendChild(n);try{n.style.position="static",n.style.opacity="1",n.style.pointerEvents="auto",n.style.width="100%"}catch(e){}var o=function(){try{var e=d.getBoundingClientRect();c.style.left=e.left+"px",c.style.top=e.top+"px",c.style.width=e.width+"px"}catch(e){}};o();try{window.addEventListener("resize",o),window.addEventListener("scroll",o,!0)}catch(e){}try{var i=document.querySelector(".w-commerce-commercecartcontainerwrapper, .w-commerce-commercecartwrapper");if(i&&!i.__fp_observed)i.__fp_observed=!0,new MutationObserver(function(){try{var e="false"===i.getAttribute("aria-hidden");e&&n.__fp_placeholder&&n.__fp_placeholder.parentNode.insertBefore(n,n.__fp_placeholder),e?c.style.display="none":(c.style.display="block",o())}catch(e){}}).observe(i,{attributes:!0,attributeFilter:["aria-hidden","style","class"]})}catch(e){}return}}catch(e){}Date.now()-t>1e4||setTimeout(function(){e(t)},250)}(Date.now()))}catch(e){}}()}function p(){!function(){try{[window.PRODUCT_MAP||window.POPUP_PRODUCT_MAP_NETTO||{},window.PRODUCT_MAP_BRUTTO||window.POPUP_PRODUCT_MAP_BRUTTO||{}].forEach(function(e){Object.keys(e||{}).forEach(function(t){var n=e[t];n&&(n.productId&&(r.productIdToKey[n.productId]=t),n.variantId&&(r.variantIdToKey[n.variantId]=t))})})}catch(e){}}();var e=document.getElementById("fp-cart-notice");e&&(e.textContent="Preise netto angezeigt; Kundentyp-Steuerung aktiv.");var t=document.getElementById("fp-clear-all");t&&t.addEventListener("click",async function(){for(var e=0;;){var t=c();if(!t.length||e++>50)break;var r=u(t[0].el);if(!r)break;r.click(),await i(1500)}});var n=document.getElementById("fp-checkout");n&&n.addEventListener("click",function(){s()});var o=a();if(o)try{new MutationObserver(function(){m()}).observe(o,{childList:!0,subtree:!0})}catch(e){}try{window.CartCompatibility&&"function"==typeof window.CartCompatibility.schedule&&window.CartCompatibility.schedule(200)}catch(e){}m()}function s(){for(var e=['[data-node-type*="checkout" i]',".w-commerce-commercecartcheckoutbutton",'a[href*="checkout" i]'],t=0;t<e.length;t++){var r=document.querySelector(e[t]);if(r)try{return void r.click()}catch(e){}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",p):p()}();