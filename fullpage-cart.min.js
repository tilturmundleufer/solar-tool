!function(){function e(){try{return"business"===(localStorage.getItem("solarTool_customerType")&&JSON.parse(localStorage.getItem("solarTool_customerType")).type)}catch(e){return!1}}var t={productIdToKey:{},variantIdToKey:{}};function r(){return document.querySelector(".w-commerce-commercecartlist")||document.querySelector(".w-commerce-commercecartcontainerwrapper")}function c(){var e=r();return e?Array.from(e.querySelectorAll('.w-commerce-commercecartitem, [data-node-type="commerce-cart-item"]')).map(function(e){var r=e.getAttribute("data-commerce-product-id")||e.querySelector("[data-commerce-product-id]")&&e.querySelector("[data-commerce-product-id]").getAttribute("data-commerce-product-id")||"",c=e.getAttribute("data-commerce-sku-id")||e.querySelector("[data-commerce-sku-id]")&&e.querySelector("[data-commerce-sku-id]").getAttribute("data-commerce-sku-id")||"",n=e.querySelector('input[type="number"], input[data-node-type*="quantity"], .w-commerce-commercecartquantity input, input[name*="quantity" i]'),o=1;try{var a=parseInt(n&&n.value,10);o=isFinite(a)&&a>0?a:1}catch(e){}for(var i="",u=[".w-commerce-commercecartproductname",'[data-node-type*="product" i]',".text-block-18",".text-block-5","h1,h2,h3,h4,div,span"],d=0;d<u.length;d++){var m=e.querySelector(u[d]);if(m&&(m.textContent||"").trim()){i=(m.textContent||"").trim();break}}var l="",y=e.querySelector("img");y&&(l=y.getAttribute("src")||y.getAttribute("data-src")||"");var p=function(e,r){return r&&t.variantIdToKey[r]||e&&t.productIdToKey[e]||null}(r,c);return{el:e,productId:r,variantId:c,quantity:o,name:i,img:l,key:p}}):[]}function n(e){return new Promise(function(t){var c=!1,n=r(),o=setTimeout(function(){c||(c=!0,t())},e||1500);if(n){var a=new MutationObserver(function(){if(!c){c=!0,clearTimeout(o);try{a.disconnect()}catch(e){}t()}});try{a.observe(n,{childList:!0,subtree:!0})}catch(e){}}})}function o(e){for(var t=['[data-wf-cart-action="remove-item"]','[data-wf-cart-action*="remove" i]','[data-node-type="commerce-cart-remove-link"]','[data-node-type*="remove" i]','a[role="button"][aria-label*="remove" i]','button[aria-label*="remove" i]',".w-commerce-commercecartremovebutton",".w-commerce-commercecartremove"],r=0;r<t.length;r++){var c=e.querySelector(t[r]);if(c)return c}try{var n=Array.from(e.querySelectorAll("a,button,div,span")).filter(function(e){var t=(e.textContent||"").trim().toLowerCase();return"entfernen"===t||"remove"===t||t.indexOf("entfernen")>=0||t.indexOf("remove")>=0});if(n.length)return n[0]}catch(e){}return null}function a(){var e=c();if(!e.length)return i(0),void d();var t=function(e){var t=0,r=!1;return e.forEach(function(e){var c=e.el.querySelector('.w-commerce-commercecartitemprice, [data-node-type*="price" i]');if(c){var n=(c.textContent||"").toLowerCase(),o=parseFloat(n.replace(/[^0-9,\.]/g,"").replace(".","").replace(",","."));isFinite(o)&&(t+=o,r=!0)}}),{subtotal:t,reliable:r}}(e);i(t.subtotal),d()}function i(t){var r=t||0;try{e()&&(r/=1.19)}catch(e){}try{document.getElementById("fp-subtotal").textContent=function(e){try{return(e||0).toFixed(2).replace(".",",")+" €"}catch(e){return"0,00 €"}}(r)}catch(e){}var c=document.getElementById("fp-summary-note");c&&(!function(){try{return!e()}catch(e){return!0}}()?c.textContent="Firmenkunden wird die MwSt im Bestellprozess berechnet.":c.textContent="Bei den angebeben Preisen handelt es sich um Nettobeträge. Privatkunden profitieren von 0% MwSt Gemäß §12 Abs. 3 UstG")}function u(){!function(){try{[window.PRODUCT_MAP||window.POPUP_PRODUCT_MAP_NETTO||{},window.PRODUCT_MAP_BRUTTO||window.POPUP_PRODUCT_MAP_BRUTTO||{}].forEach(function(e){Object.keys(e||{}).forEach(function(r){var c=e[r];c&&(c.productId&&(t.productIdToKey[c.productId]=r),c.variantId&&(t.variantIdToKey[c.variantId]=r))})})}catch(e){}}();var e=document.getElementById("fp-cart-notice");e&&(e.textContent="Preise netto angezeigt; Kundentyp-Steuerung aktiv.");var i=document.getElementById("fp-clear-all");i&&i.addEventListener("click",async function(){for(var e=c(),t=0;t<e.length;t++){var r=o(e[t].el);r&&(r.click(),await n(1500))}});var u=document.getElementById("fp-checkout");u&&u.addEventListener("click",function(){m()});var d=r();if(d)try{new MutationObserver(function(){a()}).observe(d,{childList:!0,subtree:!0})}catch(e){}try{window.CartCompatibility&&"function"==typeof window.CartCompatibility.schedule&&window.CartCompatibility.schedule(200)}catch(e){}a()}function d(){try{var e=document.querySelector('.w-commerce-commercecartcheckoutbutton, [data-node-type="cart-checkout-button"], [data-node-type*="checkout" i]'),t=document.getElementById("fp-checkout-slot");if(e&&t&&e!==t&&!t.contains(e)){var r=e.cloneNode(!0);r.addEventListener("click",function(e){e.preventDefault(),m()}),t.innerHTML="",t.appendChild(r)}}catch(e){}try{var c=document.querySelector('[data-node-type="commerce-cart-quick-checkout-button"], .w-commerce-commercecartquickcheckoutbutton'),n=document.getElementById("fp-quick-slot");if(c&&n&&c!==n&&!n.contains(c)){var o=c.cloneNode(!0);o.addEventListener("click",function(e){e.preventDefault();try{c.click()}catch(e){}}),n.innerHTML="",n.appendChild(o)}}catch(e){}try{var a=document.querySelector('[data-wf-paypal-button], [data-node-type="commerce-cart-quick-checkout-actions"] + div[id^="zoid-paypal-buttons"], [data-node-type="commerce-cart-quick-checkout-actions"] .paypal-buttons'),i=document.getElementById("fp-paypal-slot");if(a&&i){i.innerHTML="";var u=document.createElement("button");u.className="btn primary",u.textContent="Pay with PayPal",u.addEventListener("click",function(e){e.preventDefault();try{var t=document.querySelector(".paypal-buttons iframe.component-frame");t?t.contentWindow.postMessage({event:"click"},"*"):a.querySelector("iframe,button,a")?.click()}catch(e){}}),i.appendChild(u)}}catch(e){}}function m(){for(var e=['[data-node-type*="checkout" i]',".w-commerce-commercecartcheckoutbutton",'a[href*="checkout" i]'],t=0;t<e.length;t++){var r=document.querySelector(e[t]);if(r)try{return void r.click()}catch(e){}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",u):u()}();